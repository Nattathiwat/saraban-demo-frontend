import{_ as h}from"./users-duotone-57e3c13d.js";import{_ as v,a as b}from"./line-up-c54e1bbb.js";import{_ as w,r as i,o as y,c as k,a as s,t as c,h as n,b as l,d as A,f as V,k as S}from"./index-6f9b4dc9.js";const L={name:"record-type-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{name:"",desc:"",active_flag:!0,template_flag:!0}}},methods:{back(){this.$router.push({name:"record-type",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.code="",this.data.name="",this.data.desc=""},onSubmit(){let e=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขชนิดบันทึกข้อความ":"สร้างชนิดบันทึกข้อความ"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(e.edit){let t={name:e.data.name,desc:e.data.desc,active_flag:e.data.active_flag?1:0,template_flag:e.data.template_flag?1:0};e.showLoading=!0,e.axios.put(`/booktypenote/${e.$route.params.id}`,t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขชนิดบันทึกข้อความสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}else{let t={name:e.data.name,desc:e.data.desc,active_flag:e.data.active_flag?1:0,template_flag:e.data.template_flag?1:0};e.showLoading=!0,e.axios.post("/booktypenote",t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างชนิดบันทึกข้อความสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/booktypenote/${this.$route.params.id}`).then(e=>{this.showLoading=!1,this.data={...this.data,...e.data.data},this.data.active_flag=e.data.data.active_flag==1,this.data.template_flag=e.data.data.template_flag==1}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}},x={class:"master-record-type-detail"},M={class:"group-overflow"},C={class:"detail"},q={class:"group-head"},P={class:"group-first"},E={class:"name"},U={class:"group-end"},B={class:"group-detail"},D={class:"group-between"},I={class:"group-input left"},N={class:"group-input left"},F={class:"group-input left"},T={class:"group-between"},$={class:"group-input"},j={class:"group-footer"},z={class:"footer-left"},G={class:"footer-right"},H={type:"submit",class:"button-success"};function J(e,t,d,K,a,r){const u=i("cpn-input"),m=i("cpn-toggleSwitch"),p=i("cpn-textArea"),g=i("Form"),_=i("cpn-modal-alert"),f=i("cpn-loading");return y(),k("div",x,[s("div",M,[s("div",C,[s("div",q,[s("div",P,[t[6]||(t[6]=s("img",{src:h,alt:"",class:"icon-users"},null,-1)),s("div",E,c(a.edit?"แก้ไขชนิดบันทึกข้อความ":"สร้างชนิดบันทึกข้อความ"),1)]),s("div",U,[s("button",{type:"button",class:"button-back",onClick:t[0]||(t[0]=o=>r.back())},t[7]||(t[7]=[s("img",{src:v,class:"icon-back"},null,-1),s("img",{src:b,class:"icon-line"},null,-1),n(" ย้อนกลับ ")]))])]),t[15]||(t[15]=s("div",{class:"line"},null,-1)),l(g,{onSubmit:r.onSubmit,onInvalidSubmit:e.onInvalidSubmit},{default:A(()=>[s("div",B,[s("div",D,[s("div",I,[t[8]||(t[8]=s("div",{class:"name"},[n("ชื่อชนิดบันทึกข้อความ"),s("span",{class:"required"},"*")],-1)),l(u,{modelValue:a.data.name,"onUpdate:modelValue":t[1]||(t[1]=o=>a.data.name=o),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),s("div",N,[t[9]||(t[9]=s("div",{class:"name"},"เปิด/ปิด การใช้งาน",-1)),l(m,{modelValue:a.data.active_flag,"onUpdate:modelValue":t[2]||(t[2]=o=>a.data.active_flag=o),name:"active_flag"},null,8,["modelValue"])]),s("div",F,[t[10]||(t[10]=s("div",{class:"name"},"เปิด/ปิด การใช้งาน Template",-1)),l(m,{modelValue:a.data.template_flag,"onUpdate:modelValue":t[3]||(t[3]=o=>a.data.template_flag=o),name:"template_flag"},null,8,["modelValue"])])]),s("div",T,[s("div",$,[t[11]||(t[11]=s("div",{class:"name"},"รายละเอียด",-1)),l(p,{modelValue:a.data.desc,"onUpdate:modelValue":t[4]||(t[4]=o=>a.data.desc=o),name:"record-type_desc",class:"",style:{},rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),t[14]||(t[14]=s("div",{class:"line"},null,-1)),s("div",j,[s("div",z,[s("button",{type:"button",class:"button-danger",onClick:t[5]||(t[5]=o=>r.cancelClick())},t[12]||(t[12]=[s("img",{src:V,alt:"times-circle",class:"icon-times-circle"},null,-1),n(" ยกเลิก ")]))]),s("div",G,[s("button",H,[t[13]||(t[13]=s("img",{src:S,alt:"times-circle",class:"icon-check-circle"},null,-1)),n(" "+c(a.edit?"ยืนยันแก้ไขชนิดบันทึกข้อความ":"ยืนยันสร้างชนิดบันทึกข้อความ"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),l(_,{modalAlert:a.modalAlert},null,8,["modalAlert"]),l(f,{show:a.showLoading},null,8,["show"])])}const W=w(L,[["render",J]]);export{W as default};
