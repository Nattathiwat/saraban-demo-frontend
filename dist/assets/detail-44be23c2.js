import{_ as b,a as f,b as v}from"./line-up-32057639.js";import{_ as y,r as l,o as w,c as S,a as s,t as m,j as n,b as i,d as V,g as A,k}from"./index-014b7ee1.js";const C={name:"group-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",short_name:"",name:"",subministry_id:"",desc:""},optionSelect:{subministry_id:[]}}},methods:{back(){this.$router.push({name:"group",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.desc="",this.data.short_name="",this.data.name=""},onSubmit(){let e=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขกลุ่ม":"สร้างกลุ่ม"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(e.edit){let t={desc:e.data.desc,name:e.data.name,short_name:e.data.short_name,subministry_id:e.data.subministry_id};e.showLoading=!0,e.axios.put(`group/${e.$route.params.id}`,t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขกลุ่มสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}else{let t={desc:e.data.desc,name:e.data.name,short_name:e.data.short_name,subministry_id:e.data.subministry_id};e.showLoading=!0,e.axios.post("/group",t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างกลุ่มสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/group/${this.$route.params.id}`).then(e=>{this.showLoading=!1,this.data={...this.data,...e.data.data}}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})},api_master(){this.showLoading=!0,this.axios.get("/subministry").then(e=>{this.showLoading=!1,e.data.data.filter(t=>(t.value=t.id,t.name=t.Name,t)),this.optionSelect.subministry_id=e.data.data,this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})}},mounted(){this.api_master()}},L={class:"master-group-detail"},q={class:"group-overflow"},M={class:"detail"},x={class:"group-head"},U={class:"group-first"},E=s("img",{src:b,alt:"",class:"icon-users"},null,-1),P={class:"name"},N={class:"group-end"},B=s("img",{src:f,class:"icon-back"},null,-1),D=s("img",{src:v,class:"icon-line"},null,-1),I=s("div",{class:"line"},null,-1),F={class:"group-detail"},j={class:"group-between"},T={class:"group-input left"},z=s("div",{class:"name"},[n("ชื่อย่อกลุ่ม "),s("span",{class:"required"},"*")],-1),G={class:"group-input"},H=s("div",{class:"name"},[n("ชื่อกลุ่ม "),s("span",{class:"required"},"*")],-1),J={class:"group-between"},K={class:"group-input left"},O=s("div",{class:"name"},[n("กระทรวง "),s("span",{class:"required"},"*")],-1),Q={class:"group-input left"},R=s("div",{class:"name"},[n("หน่วยงาน "),s("span",{class:"required"},"*")],-1),W={class:"group-input"},X=s("div",{class:"name"},[n("กอง"),s("span",{class:"required"},"*")],-1),Y={class:"group-between"},Z={class:"group-input left"},$=s("div",{class:"name"},"รายละเอียด",-1),ee=s("div",{class:"line"},null,-1),se={class:"group-footer"},te={class:"footer-left"},oe=s("img",{src:A,alt:"times-circle",class:"icon-times-circle"},null,-1),ae={class:"footer-right"},ie={type:"submit",class:"button-success"},ne=s("img",{src:k,alt:"times-circle",class:"icon-check-circle"},null,-1);function le(e,t,d,de,o,r){const u=l("cpn-input"),c=l("cpn-autoComplete"),p=l("cpn-textArea"),_=l("Form"),h=l("cpn-modal-alert"),g=l("cpn-loading");return w(),S("div",L,[s("div",q,[s("div",M,[s("div",x,[s("div",U,[E,s("div",P,m(o.edit?"แก้ไขกลุ่ม":"สร้างกลุ่ม"),1)]),s("div",N,[s("button",{type:"button",class:"button-back",onClick:t[0]||(t[0]=a=>r.back())},[B,D,n(" ย้อนกลับ ")])])]),I,i(_,{onSubmit:r.onSubmit,onInvalidSubmit:e.onInvalidSubmit},{default:V(()=>[s("div",F,[s("div",j,[s("div",T,[z,i(u,{modelValue:o.data.short_name,"onUpdate:modelValue":t[1]||(t[1]=a=>o.data.short_name=a),name:"short_name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),s("div",G,[H,i(u,{modelValue:o.data.name,"onUpdate:modelValue":t[2]||(t[2]=a=>o.data.name=a),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),s("div",J,[s("div",K,[O,i(c,{modelValue:e.input,"onUpdate:modelValue":t[3]||(t[3]=a=>e.input=a),name:"input",rules:"required",placeholder:"กรุณาระบุ",type:"text",disabled:!0,optionSelect:o.optionSelect,onChange:e.change},null,8,["modelValue","optionSelect","onChange"])]),s("div",Q,[R,i(c,{modelValue:e.input,"onUpdate:modelValue":t[4]||(t[4]=a=>e.input=a),name:"input",rules:"required",placeholder:"กรุณาระบุ",type:"text",disabled:!0,optionSelect:o.optionSelect,onChange:e.change},null,8,["modelValue","optionSelect","onChange"])]),s("div",W,[X,i(c,{modelValue:o.data.subministry_id,"onUpdate:modelValue":t[5]||(t[5]=a=>o.data.subministry_id=a),name:"subministry_id",type:"text",optionSelect:o.optionSelect.subministry_id,onChange:e.change,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect","onChange"])])]),s("div",Y,[s("div",Z,[$,i(p,{modelValue:o.data.desc,"onUpdate:modelValue":t[6]||(t[6]=a=>o.data.desc=a),name:"group_desc",class:"",style:{},rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),ee,s("div",se,[s("div",te,[s("button",{type:"button",class:"button-danger",onClick:t[7]||(t[7]=a=>r.cancelClick())},[oe,n(" ยกเลิก ")])]),s("div",ae,[s("button",ie,[ne,n(" "+m(o.edit?"ยืนยันแก้ไขกลุ่ม":"ยืนยันสร้างกลุ่ม"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),i(h,{modalAlert:o.modalAlert},null,8,["modalAlert"]),i(g,{show:o.showLoading},null,8,["show"])])}const ue=y(C,[["render",le]]);export{ue as default};
