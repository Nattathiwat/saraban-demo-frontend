import{_ as f}from"./users-duotone-57e3c13d.js";import{_ as b,a as v}from"./line-up-c54e1bbb.js";import{_ as y,r as l,o as w,c as k,a as s,t as c,h as n,b as i,d as A,f as S,k as V}from"./index-6f9b4dc9.js";const L={name:"book-method-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",name:"",desc:"",optionSelect:{type:[{name:"หนังสือรับเข้า",value:"0"},{name:"หนังสือส่งออก",value:"1"},{name:"หนังสือรับเข้าและส่งออก",value:"2"}]}}}},methods:{back(){this.$router.push({name:"book-method",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.name="",this.data.type="",this.data.desc=""},onSubmit(){let t=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขรูปแบบการรับ-ส่งหนังสือ":"สร้างรูปแบบการรับ-ส่งหนังสือ"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(t.edit){let e={name:t.data.name,type:t.data.type,desc:t.data.desc};t.showLoading=!0,t.axios.put(`/bookmethod/${t.$route.params.id}`,e).then(()=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขรูปแบบการรับ-ส่งหนังสือสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){t.back()}}}).catch(d=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}else{let e={name:t.data.name,type:t.data.type,desc:t.data.desc};t.showLoading=!0,t.axios.post("/bookmethod",e).then(()=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างรูปแบบการรับ-ส่งหนังสือสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){t.back()}}}).catch(d=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/bookmethod/${this.$route.params.id}`).then(t=>{this.showLoading=!1,this.data.name=t.data.data.name,this.data.type=t.data.data.type,this.data.desc=t.data.data.desc}).catch(t=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:t.response.data.message}})}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}},x={class:"master-book-method-detail"},M={class:"group-overflow"},q={class:"detail"},C={class:"group-head"},P={class:"group-first"},E={class:"name"},B={class:"group-end"},D={class:"group-detail"},I={class:"group-between"},N={class:"group-input left"},U={class:"group-input"},F={class:"group-between"},$={class:"group-input"},T={class:"group-footer"},j={class:"footer-left"},z={class:"footer-right"},G={type:"submit",class:"button-success"};function H(t,e,d,J,o,r){const m=l("cpn-input"),u=l("cpn-select"),p=l("cpn-textArea"),h=l("Form"),_=l("cpn-modal-alert"),g=l("cpn-loading");return w(),k("div",x,[s("div",M,[s("div",q,[s("div",C,[s("div",P,[e[5]||(e[5]=s("img",{src:f,alt:"",class:"icon-users"},null,-1)),s("div",E,c(o.edit?"แก้ไขรูปแบบการรับ-ส่งหนังสือ":"สร้างรูปแบบการรับ-ส่งหนังสือ"),1)]),s("div",B,[s("button",{type:"button",class:"button-back",onClick:e[0]||(e[0]=a=>r.back())},e[6]||(e[6]=[s("img",{src:b,class:"icon-back"},null,-1),s("img",{src:v,class:"icon-line"},null,-1),n(" ย้อนกลับ ")]))])]),e[13]||(e[13]=s("div",{class:"line"},null,-1)),i(h,{onSubmit:r.onSubmit,onInvalidSubmit:t.onInvalidSubmit},{default:A(()=>[s("div",D,[s("div",I,[s("div",N,[e[7]||(e[7]=s("div",{class:"name"},[n("ชื่อรูปแบบการรับ-ส่งหนังสือ "),s("span",{class:"required"},"*")],-1)),i(m,{modelValue:o.data.name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.data.name=a),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),s("div",U,[e[8]||(e[8]=s("div",{class:"name"},[n("ประเภทหนังสือ"),s("span",{class:"required"},"*")],-1)),i(u,{modelValue:o.data.type,"onUpdate:modelValue":e[2]||(e[2]=a=>o.data.type=a),name:"type",optionSelect:o.data.optionSelect.type,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])])]),s("div",F,[s("div",$,[e[9]||(e[9]=s("div",{class:"name"},"รายละเอียด ",-1)),i(p,{modelValue:o.data.desc,"onUpdate:modelValue":e[3]||(e[3]=a=>o.data.desc=a),name:"book_method_desc",rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),e[12]||(e[12]=s("div",{class:"line"},null,-1)),s("div",T,[s("div",j,[s("button",{type:"button",class:"button-danger",onClick:e[4]||(e[4]=a=>r.cancelClick())},e[10]||(e[10]=[s("img",{src:S,alt:"times-circle",class:"icon-times-circle"},null,-1),n(" ยกเลิก ")]))]),s("div",z,[s("button",G,[e[11]||(e[11]=s("img",{src:V,alt:"times-circle",class:"icon-check-circle"},null,-1)),n(" "+c(o.edit?"ยืนยันแก้ไขรูปแบบการรับ-ส่งหนังสือ":"ยืนยันสร้างรูปแบบการรับ-ส่งหนังสือ"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),i(_,{modalAlert:o.modalAlert},null,8,["modalAlert"]),i(g,{show:o.showLoading},null,8,["show"])])}const R=y(L,[["render",H]]);export{R as default};
