import{_ as T,r as _,o as c,c as b,a as t,h as d,b as i,d as A,w as u,v as p,f as x,k as h,j as v,t as f,F,i as L}from"./index-6f9b4dc9.js";import{_ as j,a as I}from"./line-up-c54e1bbb.js";const C="/assets/arrow-circle-leftffffff-ecc4a1ca.svg";const B={name:"automail-sendmail-detail",data(){return{flag:1,step:1,modalAlert:{showModal:!1,title:"",message:""},modal:{showModal:!1,book_recipient:"",optionSelect:{book_recipient:[]}},modalTemplate:{showModal:!1,message_format:"",optionSelect:{message_format:[]}},showLoading:!1,edit:!1,data:{bookout:{book_type_name:"",book_regis_name:"",secret_name:"",speed_name:"",book_out_document_number:"",as_of_date:"",from:"",to:"",subject:"",greeting:""},greeting:"",message:"",detail:"",signature:"",department_name:"",contact_name:"",contact:"",reply_message:"",disclaimer:"",send_type_id:"",link:"",main_file_name:"",copy_main_file_name:"",attachments:[],subject:"",to:"",cc:"",bcc:"",fileType:[],logoImage:new URL("/assets/pkm_logo-94349e4f.png",self.location).href},no_main_file_name:"ไม่มีหนังสือต้นเรื่อง",no_attachments:"ไม่มีสิ่งที่แนบมาด้วย",optionSelect:{send_type_id:[{value:1,name:"แนบไฟล์ทั้งหมด ตามข้างล่างนี้"},{value:2,name:"ไม่แนบไฟล์ แต่ใช้ลิงก์ข้างล่างนี้แทน"}]},errorFileSize:!1}},methods:{reloadClick(){console.log("reloadClick")},uploadFile(s){document.querySelector(`[name="${s}"]`).click()},fileChange(s){for(var e=0;e<document.querySelector(`[name="${s}"]`).files.length;e++){let a=document.querySelector(`[name="${s}"]`).files[e];if(this.data.fileType.indexOf(a.type)==-1)return this.modalAlert={showModal:!0,type:"error",message:this.defaultMessageErrorFile},!1;if(s=="attachments"&&a.type=="application/pdf"){let g={filename:a.name,type:a.type,link:URL.createObjectURL(a),size:(a.size/1024/1024).toFixed(2)+" MB",file_size:a.size,file:a,flag:"add",original_flag:!1};this.data.attachments.push(g)}}this.sumfile(),document.querySelector(`[name="${s}"]`).value=null},previewFile(s){s.filename&&s.link&&this.axios({method:"get",url:s.link,baseURL:"",responseType:"blob"}).then(e=>{const a=new Blob([e.data],{type:this.assetsUtils.getTypeFile(s.filename)});window.open(URL.createObjectURL(a))})},deleteFile(s,e){s.flag=="edit"?s.flag="delete":this.data.attachments.splice(e,1),this.sumfile()},sumfile(){var e;let s=0;this.data.copy_main_file_name&&(s+=this.data.copy_main_file_size?+this.data.copy_main_file_size:0),this.data.main_file_name&&(s+=this.data.main_file_size?+this.data.main_file_size:0),(e=this.data.attachments)==null||e.filter(a=>{a.flag!="delete"&&(s+=+a.file_size)}),s/1024/1024>25?(this.errorFileSize=!0,this.data.send_type_id=2):this.errorFileSize=!1,this.data.sumfile=(s/1024/1024).toFixed(2)},cancelClick(){console.log("cancelClick")},recommendClick(s){this.modal.book_recipient="",this.keyupModal({target:{value:""}}),this.modal.showModal=!0},keyupModal(s){this.modal.optionSelect.book_recipient=[],this.axios.get("/master-data/message-template",{params:{keyword:s.target.value}}).then(e=>{e.data.data&&(e.data.data.meta.filter(a=>(a.value=a.id,a.name=a.receive_name,a)),this.modal.optionSelect.book_recipient=e.data.data.meta)})},modalClick(){this.modal.book_recipient?this.axios.get(`/master-data/message-template/${this.modal.book_recipient}`,{params:{keyword:this.modal.book_recipient}}).then(s=>{this.data.greeting=s.data.data.title_name,this.data.signature=s.data.data.signature,this.modal.showModal=!1}).catch(s=>{this.modal.showModal=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:s.response.data.message}}):this.modal.showModal=!1},templateClick(s){this.modalTemplate.message_format="",this.keyupModalTeamplate({target:{value:""}}),this.modalTemplate.showModal=!0},keyupModalTeamplate(s){this.modalTemplate.optionSelect.message_format=[],this.modalTemplate.optionSelect.message_format=[{value:"1",name:"01: ขอนำส่งหนังสือ"}]},modalTemplateClick(){this.modalTemplate.message_format?(this.data.message="ขอนำส่งหนังสือ เลขที่ นร0501/48, เรื่อง ทดสอบ, ลงวันที่ 14 กุมภาพันธ์ 2566",this.data.detail="รายละเอียดตามเอกสารที่ส่งมาด้วย",this.data.department_name="สำนักเลขาธิการคณะรัฐมนตรี",this.data.contact="โทร. 0 2280 9000 ต่อ .... (ชื่อผู้ติดต่อ ...)",this.data.reply_message="“หากท่านได้รับอีเมลนี้แล้วกรุณาแจ้งการได้รับกลับมายังที่อยู่อีเมลนี้ด้วยจะขอบคุณยิ่ง”",this.data.disclaimer=`**อีเมล(และ/หรือเอกสารแนบ) นี้เป็นข้อมูลที่เป็นความลับและอาจเป็นข้อมูลที่เป็นเอกสิทธิ์เฉพาะบุคคล การนำข้อมูลดังกล่าวไปใช้หรือเปิดเผยให้บุคคลอื่นใดล่วงรู้เป็นการกระทำที่ไม่ได้รับอนุญาติหากท่านมิได้เป็นบุคคลที่อีเมลฉบับนี้ระบุถึงแล้ว กรุณาลบอีเมลนี้ออกจากคอมพิวเตอร์ที่ท่านได้รับทั้งนี้ ขอขอบคุณหากท่านได้แจ้งผู้ส่งถึงการจัดส่งอีเมลที่ผิดพลาดด้วย\r
**This e-mail (and/or attachments) is confidential and may be privileged. Use or disclosure of it by anyone other than a designated address is unauthorized. If you are not intented recipient, please deleate this e-mail from computer on which you received it. We thank you for notifying us immediately.`,this.modalTemplate.showModal=!1):this.modalTemplate.showModal=!1},back(){this.$router.push({name:"automail-sendmail",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},onSubmit(){let s=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.flag==1?"บันทึกร่าง":"บันทึกและส่ง"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){s.showLoading=!0,s.uploadFileAll()}}},uploadFileAll(){let s=this.assetsUtils.currentDate(),e=[],a=[];this.data.attachments.filter(g=>{g.file&&g.flag=="add"&&e.push(!0)}),e.length>0?this.data.attachments.filter(g=>{if(g.file&&g.flag=="add"){let l=new FormData;l.append("file",g.file),l.append("dst",`${s.split("/")[0]+"-"+s.split("/")[1]+"-"+s.split("/")[2]}`),this.axios.post("/upload/single",l,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{g.filename=r.data.data.filename,g.filepath=r.data.data.path,a.push(!0),e.length==a.length&&this.callApiSave()}).catch(r=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:r.response.data.message}})}}):this.callApiSave()},callApiSave(){this.showLoading=!0;let s=this,e={...this.data,greeting2:this.data.bookout.greeting,is_draft:this.flag==1,flag:this.flag==1?"draft":"",user_id:parseInt(localStorage.getItem("user_id")),department_id:parseInt(localStorage.getItem("department_id"))};e.attachments.filter(a=>{a.flag=a.flag=="edit"?e.id==0?"add":"":a.flag}),e.send_type_id==2?(e.attachments=[],e.copy_main_file_name="",e.copy_main_file_path="",e.copy_main_file_size="",e.main_file_name="",e.main_file_path="",e.main_file_size=""):e.link="",this.axios.post("/book-out-external/email-information",e).then(a=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"success",title:this.flag==1?"ทำการบันทึกร่างสำเร็จแล้ว":"ทำการบันทึกและส่งสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){s.flag==1?s.apiDetail():s.back()}}}).catch(a=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:a.response.data.message}})},apiDetail(){this.showLoading=!0,this.axios.get(`/book-out-external/book-out-automail/${this.$route.params.id}`).then(s=>{this.showLoading=!1,this.data={...this.data,...s.data.data},this.data.attachments.filter(e=>(e.flag="edit",e.link=e.filepath?this.backendport+"/"+e.filepath:"",e.file_size=parseInt(e.file_size),e.file={size:e.file_size*1024*1024},e)),this.sumfile(),this.axios({method:"get",url:this.backendport+"/"+localStorage.getItem("filepath"),baseURL:"",responseType:"blob"}).then(e=>{const a=new Blob([e.data],{type:this.assetsUtils.getTypeFile(localStorage.getItem("filename"))});this.data.logoImage=URL.createObjectURL(a)}).catch(e=>{this.data.logoImage=new URL("/assets/pkm_logo-94349e4f.png",self.location).href})}).catch(s=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:s.response.data.message}})},apiMaster(){this.showLoading=!0;const s=this.axios.get("/filetype?keyword=&page_size=50&page=1");this.axios.all([s]).then(this.axios.spread((...e)=>{this.showLoading=!1;const a=e[0];this.data.fileType=[],a.data.data.filter(g=>{g.active_flag==1&&this.data.fileType.push(g.content_type)}),this.apiDetail()})).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})}},mounted(){this.apiMaster()},watch:{"modal.showModal"(){document.body.style.overflow=this.modal.showModal?"hidden":""},"modalTemplate.showModal"(){document.body.style.overflow=this.modalTemplate.showModal?"hidden":""}}},D={class:"automail-sendmail-detail"},R={class:"group-overflow"},E={class:"detail"},N={class:"group-head"},O={class:"group-end"},P={class:"group-detail"},H={class:"d-flex justify-content-between align-items-center mb-4"},K={class:"title"},W={class:"title"},G={class:"title"},J={class:"border"},Q={class:"group-between"},X={class:"group-input"},Y={class:"group-input"},Z={class:"group-between"},$={class:"group-input"},ee={class:"group-input"},te={class:"group-input"},le={class:"group-input"},oe={class:"group-between"},se={class:"group-input"},ie={class:"group-input"},ae={class:"group-between"},ne={class:"group-input"},de={key:0},re={class:"group-input mt-4"},me={class:"group-recommend mb-3"},ue={class:"group-input"},pe={class:"group-input"},ge={class:"d-flex justify-content-between align-items-center mb-3"},fe={class:"group-input"},ce={class:"group-input"},be={class:"group-input"},_e={class:"group-input"},he={class:"mb-3"},ve={class:"group-input"},ye={class:"group-input"},ke={key:1},we={class:"sum-size-file"},xe={class:"group-input"},Ve={class:"group-input"},ze={class:"group-recommend"},Ce={class:"group-input"},Se={key:0,class:"d-flex"},Ue={key:1},Me={class:"group-input"},qe={class:"name d-flex justify-content-between align-items-center mb-3 mt-3"},Te={key:0,class:"d-flex mb-2"},Ae={key:1},Fe={class:"d-flex mb-2"},Le=["onClick"],je=["onClick"],Ie={key:2},Be={key:2},De={class:"group-input mt-4"},Re={class:"group-input mt-4"},Ee={class:"group-input mt-4"},Ne={class:"group-input mt-4"},Oe={class:"group-input mt-4"},Pe={class:"name d-flex justify-content-between align-items-center mb-3 mt-3"},He={class:"border-preview"},Ke={bgcolor:"#ffffff",cellpadding:"0",cellspacing:"0",class:"nl-container",role:"presentation",style:{"table-layout":"fixed","vertical-align":"top","min-width":"320px","border-spacing":"0","border-collapse":"collapse","background-color":"#ffffff",width:"100%"},valign:"top",width:"100%"},We={style:{"vertical-align":"top"},valign:"top"},Ge={style:{"word-break":"break-word","vertical-align":"top"},valign:"top"},Je={style:{"background-color":"#ffffff"}},Qe={class:"block-grid",style:{"min-width":"320px","max-width":"680px","overflow-wrap":"break-word","word-wrap":"break-word","word-break":"break-word",margin:"0 auto","background-color":"transparent"}},Xe={style:{"border-collapse":"collapse",display:"table",width:"100%","background-color":"transparent"}},Ye={class:"col num12",style:{"min-width":"320px","max-width":"680px",display:"table-cell","vertical-align":"top",width:"680px"}},Ze={class:"col_cont",style:{width:"100% !important"}},$e={style:{"border-top":"0px solid transparent","border-left":"0px solid transparent","border-bottom":"0px solid transparent","border-right":"0px solid transparent","padding-top":"5px","padding-bottom":"5px","padding-right":"0px","padding-left":"0px"}},et={align:"center",class:"img-container center fixedwidth",style:{"padding-right":"0px","padding-left":"0px","margin-top":"40px"}},tt={href:"#",style:{outline:"none"},tabindex:"-1",target:"_blank"},lt=["src"],ot={style:{color:"#666","font-family":"'Arial', sans-serif","line-height":"1.5","padding-top":"10px","padding-right":"10px","padding-bottom":"10px","padding-left":"10px"}},st={style:{"line-height":"2.0","font-size":"12px",color:"#15466e","font-family":"Arial, sans-serif","margin-bottom":"20px"}},it={style:{"font-size":"14px","line-height":"2.0","word-break":"break-word","text-align":"center",margin:"0"}},at={style:{"font-size":"16px","font-weight":"500"}},nt={style:{color:"#666","font-family":"'Arial', sans-serif","line-height":"1.5","padding-top":"10px","padding-right":"10px","padding-bottom":"10px","padding-left":"10px"}},dt={style:{"line-height":"2.0","font-size":"12px",color:"#15466e","font-family":"Arial, sans-serif","margin-bottom":"5px"}},rt={style:{"font-size":"14px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0"}},mt={style:{"font-size":"20px","font-weight":"600"}},ut={style:{"line-height":"1.5","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif"}},pt={style:{"font-size":"16px","line-height":"1.5","word-break":"break-word","text-align":"left",margin:"0"}},gt={style:{"line-height":"1.5","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif"}},ft={style:{"font-size":"16px","line-height":"1.5","word-break":"break-word","text-align":"left",margin:"0"}},ct=["href"],bt={style:{"line-height":"2.0","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif","margin-bottom":"5px","margin-top":"20px"}},_t={style:{"font-size":"16px","line-height":"1.5","word-break":"break-word","text-align":"left",margin:"0"}},ht={style:{"line-height":"2.0","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif","margin-bottom":"20px","margin-top":"20px"}},vt={style:{"font-size":"16px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0","text-indent":"50px"}},yt={style:{"font-size":"16px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0"}},kt={style:{"line-height":"2.0","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif","margin-bottom":"20px","margin-top":"20px","border-bottom":"#030303 dashed 1px","padding-bottom":"15px"}},wt={style:{"font-size":"16px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0"}},xt={style:{"font-size":"16px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0"}},Vt={style:{"line-height":"2.0","font-size":"12px",color:"#333333","font-family":"Arial, sans-serif","margin-bottom":"20px","margin-top":"20px"}},zt={style:{"font-size":"16px","line-height":"2.0","word-break":"break-word","text-align":"left",margin:"0","margin-bottom":"15px"}},Ct=["innerHTML"],St={class:"modal-recommend"},Ut={class:"modal-class"},Mt={class:"modal-center"},qt={class:"modal-size"},Tt={class:"modal-title"},At={class:"modal-detail"},Ft={class:"group-input"},Lt={class:"group-footer"},jt={class:"modal-template"},It={class:"modal-class"},Bt={class:"modal-center"},Dt={class:"modal-size"},Rt={class:"modal-title"},Et={class:"modal-detail"},Nt={class:"group-input"},Ot={class:"group-footer"};function Pt(s,e,a,g,l,r){const n=_("cpn-input"),y=_("cpn-textArea"),S=_("cpn-select"),U=_("Form"),V=_("cpn-autoComplete"),M=_("cpn-modal-alert"),q=_("cpn-loading");return c(),b("div",D,[t("div",R,[t("div",E,[t("div",N,[e[53]||(e[53]=t("div",{class:"group-first"},[t("i",{class:"bi bi-envelope icon-envelope"}),t("div",{class:"name"},"ส่งหนังสือส่งออก ผ่านอีเมลอัตโนมัติ")],-1)),t("div",O,[t("button",{type:"button",class:"button-back",onClick:e[0]||(e[0]=m=>r.back())},e[52]||(e[52]=[t("img",{src:j,class:"icon-back"},null,-1),t("img",{src:I,class:"icon-line"},null,-1),d(" ย้อนกลับ ")]))])]),e[100]||(e[100]=t("div",{class:"line"},null,-1)),i(U,{onSubmit:r.onSubmit,onInvalidSubmit:s.onInvalidSubmit},{default:A(()=>{var m,z;return[t("div",P,[t("div",H,[u(t("div",K,"๑. ร่างเนื้อหาจดหมาย",512),[[p,l.step==1]]),u(t("div",W,"๒. แนบเอกสาร",512),[[p,l.step==2]]),u(t("div",G,"๓. บันทึกและส่งจดหมาย",512),[[p,l.step==3]]),t("div",null,[u(t("button",{type:"button",class:"button-after button-primary",onClick:e[1]||(e[1]=o=>l.step-=1)},e[54]||(e[54]=[t("img",{src:C,class:"icon-after"},null,-1),d(" ก่อนหน้า ")]),512),[[p,l.step!=1]]),t("button",{type:"button",class:"button-cancel button-danger",onClick:e[2]||(e[2]=o=>r.cancelClick())},e[55]||(e[55]=[t("img",{src:x,alt:"times-circle",class:"icon-times-circle"},null,-1),d(" ยกเลิกร่าง ")])),t("button",{type:"submit",class:"button-save button-success",onClick:e[3]||(e[3]=o=>l.flag=1)},e[56]||(e[56]=[t("img",{src:h,alt:"times-circle",class:"icon-check-circle"},null,-1),d(" บันทึกร่าง ")])),u(t("button",{type:"submit",class:"button-save2 button-primary",onClick:e[4]||(e[4]=o=>l.flag=2)},e[57]||(e[57]=[t("img",{src:h,alt:"times-circle",class:"icon-check-circle"},null,-1),d(" บันทึกและส่ง ")]),512),[[p,l.step==3]]),u(t("button",{type:"button",class:"button-next button-primary",onClick:e[5]||(e[5]=o=>l.step+=1)},e[58]||(e[58]=[d(" ถัดไป "),t("img",{src:C,class:"icon-next"},null,-1)]),512),[[p,l.step!=3]])])]),e[99]||(e[99]=t("div",{class:"head"},"เกี่ยวกับหนังสือส่งออก",-1)),t("div",J,[t("div",Q,[t("div",X,[e[59]||(e[59]=t("div",{class:"name"},"ประเภท",-1)),i(n,{modelValue:l.data.bookout.book_type_name,"onUpdate:modelValue":e[6]||(e[6]=o=>l.data.bookout.book_type_name=o),name:"bookout.book_type_name",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",Y,[e[60]||(e[60]=t("div",{class:"name"},"ทะเบียน",-1)),i(n,{modelValue:l.data.bookout.book_regis_name,"onUpdate:modelValue":e[7]||(e[7]=o=>l.data.bookout.book_regis_name=o),name:"bookout.book_regis_name",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),t("div",Z,[t("div",$,[e[61]||(e[61]=t("div",{class:"name"},"ชั้นความลับ",-1)),i(n,{modelValue:l.data.bookout.secret_name,"onUpdate:modelValue":e[8]||(e[8]=o=>l.data.bookout.secret_name=o),name:"bookout.secret_name",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",ee,[e[62]||(e[62]=t("div",{class:"name"},"ความเร่งด่วน",-1)),i(n,{modelValue:l.data.bookout.speed_name,"onUpdate:modelValue":e[9]||(e[9]=o=>l.data.bookout.speed_name=o),name:"bookout.speed_name",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",te,[e[63]||(e[63]=t("div",{class:"name"},"เลขที่ออก สลค.",-1)),i(n,{modelValue:l.data.bookout.book_out_document_number,"onUpdate:modelValue":e[10]||(e[10]=o=>l.data.bookout.book_out_document_number=o),name:"bookout.book_out_document_number",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",le,[e[64]||(e[64]=t("div",{class:"name"},"ลงวันที่",-1)),i(n,{modelValue:l.data.bookout.as_of_date,"onUpdate:modelValue":e[11]||(e[11]=o=>l.data.bookout.as_of_date=o),name:"bookout.as_of_date",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),t("div",oe,[t("div",se,[e[65]||(e[65]=t("div",{class:"name"},"จากสังกัด/กอง",-1)),i(n,{modelValue:l.data.bookout.from,"onUpdate:modelValue":e[12]||(e[12]=o=>l.data.bookout.from=o),name:"bookout.from",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",ie,[e[66]||(e[66]=t("div",{class:"name"},"ถึง",-1)),i(n,{modelValue:l.data.bookout.to,"onUpdate:modelValue":e[13]||(e[13]=o=>l.data.bookout.to=o),name:"bookout.to",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),t("div",ae,[t("div",ne,[e[67]||(e[67]=t("div",{class:"name"},"ชื่อเรื่อง",-1)),i(n,{modelValue:l.data.bookout.subject,"onUpdate:modelValue":e[14]||(e[14]=o=>l.data.bookout.subject=o),name:"bookout.subject",disabled:!0,placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),l.step==1?(c(),b("div",de,[t("div",re,[e[69]||(e[69]=t("div",{class:"name"},[d("คำขึ้นต้น "),t("span",{class:"required"},"*")],-1)),t("div",me,[i(n,{modelValue:l.data.greeting,"onUpdate:modelValue":e[15]||(e[15]=o=>l.data.greeting=o),name:"greeting",class:"input-recommend",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"]),t("button",{type:"button",class:"button-recommend",onClick:e[16]||(e[16]=o=>r.recommendClick())},e[68]||(e[68]=[t("i",{class:"bi bi-question icon-question"},null,-1),d(" แนะนำ ")]))])]),t("div",ue,[e[70]||(e[70]=t("div",{class:"name"},"เรียน ",-1)),i(n,{modelValue:l.data.bookout.greeting,"onUpdate:modelValue":e[17]||(e[17]=o=>l.data.bookout.greeting=o),name:"bookout-greeting",placeholder:"ผู้รับหนังสือ"},null,8,["modelValue"])]),t("div",pe,[t("div",ge,[e[72]||(e[72]=t("div",{class:"name"},[d("ข้อความ "),t("span",{class:"required"},"*")],-1)),t("div",null,[u(t("button",{type:"button",class:"button-template",onClick:e[18]||(e[18]=o=>r.templateClick())},e[71]||(e[71]=[t("i",{class:"bi bi-question icon-question"},null,-1),d(" เลือกเทมเพลต ")]),512),[[p,!1]])])]),i(y,{modelValue:l.data.message,"onUpdate:modelValue":e[19]||(e[19]=o=>l.data.message=o),name:"message",rows:"15",rules:"required",placeholder:"เนื้อความจดหมาย"},null,8,["modelValue"])]),t("div",fe,[e[73]||(e[73]=t("div",{class:"name"},[d("รายละเอียดตามเอกสารที่ส่งมาด้วย "),t("span",{class:"required"},"*")],-1)),i(y,{modelValue:l.data.detail,"onUpdate:modelValue":e[20]||(e[20]=o=>l.data.detail=o),name:"detail",rules:"required",rows:"2",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",ce,[e[74]||(e[74]=t("div",{class:"name"},[d("คำลงท้าย "),t("span",{class:"required"},"*")],-1)),i(n,{modelValue:l.data.signature,"onUpdate:modelValue":e[21]||(e[21]=o=>l.data.signature=o),name:"signature",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",be,[e[75]||(e[75]=t("div",{class:"name"},[d("ชื่อหน่วยงานที่ส่งหนังสือ "),t("span",{class:"required"},"*")],-1)),i(n,{modelValue:l.data.department_name,"onUpdate:modelValue":e[22]||(e[22]=o=>l.data.department_name=o),name:"department_name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",_e,[e[76]||(e[76]=t("div",{class:"name"},[d("ข้อมูลผู้ติดต่อ "),t("span",{class:"required"},"*")],-1)),t("div",he,[i(n,{modelValue:l.data.contact_name,"onUpdate:modelValue":e[23]||(e[23]=o=>l.data.contact_name=o),name:"contact_name",rules:"required",placeholder:"ชื่อส่วนราชการเจ้าของเรื่องหรือหน่วยงานที่ออกหนังสือ"},null,8,["modelValue"])]),i(n,{modelValue:l.data.contact,"onUpdate:modelValue":e[24]||(e[24]=o=>l.data.contact=o),name:"contact",rules:"required",placeholder:"เบอร์โทร และชื่อผู้ติดต่อ"},null,8,["modelValue"])]),e[79]||(e[79]=t("div",{class:"group-input"},[t("div",{class:"name"},"ข้อความใต้เส้นปิดข้อความ"),t("div",{class:"line"})],-1)),t("div",ve,[e[77]||(e[77]=t("div",{class:"name"},[d("ข้อความขอให้ตอบกลับ "),t("span",{class:"required"},"*")],-1)),i(n,{modelValue:l.data.reply_message,"onUpdate:modelValue":e[25]||(e[25]=o=>l.data.reply_message=o),name:"reply_message",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",ye,[e[78]||(e[78]=t("div",{class:"name"},[d("Disclaimer "),t("span",{class:"required"},"*")],-1)),i(y,{modelValue:l.data.disclaimer,"onUpdate:modelValue":e[26]||(e[26]=o=>l.data.disclaimer=o),name:"disclaimer",rules:"required",rows:"15",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])):v("",!0),l.step==2?(c(),b("div",ke,[u(t("div",{class:"sum-size-file-error"}," คำเตือน: ขนาดไฟล์แนบรวม "+f(l.data.sumfile)+"MB เกินกว่า 25MB ระบบไม่สามารถส่งหนังสือโดยการแนบไฟล์ได้ ",513),[[p,l.errorFileSize]]),u(t("div",we,[t("span",null,"ขนาดไฟล์รวม "+f(l.data.sumfile)+"MB (อนุญาตให้แนบไฟล์รวมกันสูงสุด 25MB)",1)],512),[[p,!l.errorFileSize]]),t("div",xe,[e[80]||(e[80]=t("div",{class:"name"},[d("วิธีการส่งไฟล์ "),t("span",{class:"required"},"*")],-1)),i(S,{modelValue:l.data.send_type_id,"onUpdate:modelValue":e[27]||(e[27]=o=>l.data.send_type_id=o),name:"send_type_id",rules:"required",disabled:l.errorFileSize,optionSelect:l.optionSelect.send_type_id,placeholder:"กรุณาระบุ"},null,8,["modelValue","disabled","optionSelect"])]),t("div",Ve,[e[82]||(e[82]=t("div",{class:"name"},"ลิงก์ดาวน์โหลดเอกสาร",-1)),t("div",ze,[i(n,{modelValue:l.data.link,"onUpdate:modelValue":e[28]||(e[28]=o=>l.data.link=o),name:"link",class:"input-link",disabled:l.data.send_type_id==1,rules:l.errorFileSize||l.data.send_type_id==2?"required":"",placeholder:"กรุณาระบุ"},null,8,["modelValue","disabled","rules"]),e[81]||(e[81]=t("button",{type:"button",class:"button-link none-pointer"},[t("i",{class:"bi bi-link-45deg icon-question"})],-1))])]),t("div",Ce,[e[84]||(e[84]=t("div",{class:"name"},"หนังสือต้นเรื่อง",-1)),l.data.main_file_name?(c(),b("div",Se,[i(n,{modelValue:l.data.main_file_name,"onUpdate:modelValue":e[29]||(e[29]=o=>l.data.main_file_name=o),name:"main_file_name",disabled:!0},null,8,["modelValue"]),t("button",{type:"button",class:"button-view",onClick:e[30]||(e[30]=o=>r.previewFile({filename:l.data.main_file_name,link:l.data.main_file_path?s.backendport+"/"+l.data.main_file_path:""}))},e[83]||(e[83]=[t("i",{class:"bi bi-eye icon-eye"},null,-1)]))])):(c(),b("div",Ue,[i(n,{modelValue:l.no_main_file_name,"onUpdate:modelValue":e[31]||(e[31]=o=>l.no_main_file_name=o),name:"no_main_file_name",disabled:!0},null,8,["modelValue"])]))]),e[90]||(e[90]=t("div",{class:"line"},null,-1)),t("div",Me,[t("div",qe,[e[86]||(e[86]=t("div",null,"สิ่งที่แนบมาด้วย",-1)),t("input",{type:"file",multiple:"",onChange:e[32]||(e[32]=o=>r.fileChange("attachments")),name:"attachments",style:{display:"none"},accept:"application/pdf"},null,32),t("button",{type:"button",class:"button-file",onClick:e[33]||(e[33]=o=>r.uploadFile("attachments"))},e[85]||(e[85]=[t("i",{class:"bi bi-plus icon-plus"},null,-1),d(" แนบเอกสาร ")]))]),l.data.copy_main_file_name?(c(),b("div",Te,[i(n,{modelValue:l.data.copy_main_file_name,"onUpdate:modelValue":e[34]||(e[34]=o=>l.data.copy_main_file_name=o),name:"copy_main_file_name",disabled:!0},null,8,["modelValue"]),t("button",{type:"button",class:"button-view",onClick:e[35]||(e[35]=o=>r.previewFile({filename:l.data.copy_main_file_name,link:l.data.copy_main_file_path?s.backendport+"/"+l.data.copy_main_file_path:""}))},e[87]||(e[87]=[t("i",{class:"bi bi-eye icon-eye"},null,-1)]))])):v("",!0),((z=(m=l.data)==null?void 0:m.attachments.filter(o=>o.flag!="delete"))==null?void 0:z.length)>0||l.data.copy_main_file_name?(c(),b("div",Ae,[(c(!0),b(F,null,L(l.data.attachments,(o,k)=>u((c(),b("div",{key:k},[t("div",Fe,[i(n,{modelValue:o.filename,"onUpdate:modelValue":w=>o.filename=w,name:"filename"+k,disabled:!0},null,8,["modelValue","onUpdate:modelValue","name"]),t("button",{type:"button",class:"button-view",onClick:w=>r.previewFile(o)},e[88]||(e[88]=[t("i",{class:"bi bi-eye icon-eye"},null,-1)]),8,Le),u(t("button",{type:"button",class:"button-del",onClick:w=>r.deleteFile(o,k)},e[89]||(e[89]=[t("i",{class:"bi bi-trash icon-trash"},null,-1)]),8,je),[[p,!o.original_flag]])])])),[[p,o.flag!="delete"]])),128))])):(c(),b("div",Ie,[i(n,{modelValue:l.no_attachments,"onUpdate:modelValue":e[36]||(e[36]=o=>l.no_attachments=o),name:"no_attachments",disabled:!0},null,8,["modelValue"])]))])])):v("",!0),l.step==3?(c(),b("div",Be,[t("div",De,[e[91]||(e[91]=t("div",{class:"name"},[d("Subject / Mail "),t("span",{class:"required"},"*")],-1)),i(n,{modelValue:l.data.subject,"onUpdate:modelValue":e[37]||(e[37]=o=>l.data.subject=o),name:"subject",rules:"required",placeholder:"เรื่อง"},null,8,["modelValue"])]),t("div",Re,[e[92]||(e[92]=t("div",{class:"name"},[d("ถึง / To "),t("span",{class:"required"},"*"),d(" (สามารถระบุได้มากกว่า 1 อีเมล โดยคั่นแต่ละอีเมลด้วยสัญลักษณ์ ,)")],-1)),i(n,{modelValue:l.data.to,"onUpdate:modelValue":e[38]||(e[38]=o=>l.data.to=o),name:"to",rules:"required",placeholder:"อีเมลผู้รับจดหมาย"},null,8,["modelValue"])]),t("div",Ee,[e[93]||(e[93]=t("div",{class:"name"},"สำเนาถึง / Cc (สามารถระบุได้มากกว่า 1 อีเมล โดยคั่นแต่ละอีเมลด้วยสัญลักษณ์ ,)",-1)),i(n,{modelValue:l.data.cc,"onUpdate:modelValue":e[39]||(e[39]=o=>l.data.cc=o),name:"cc",placeholder:"อีเมลผู้รับจดหมาย"},null,8,["modelValue"])]),t("div",Ne,[e[94]||(e[94]=t("div",{class:"name"},"สำเนาลับถึง / BCc (สามารถระบุได้มากกว่า 1 อีเมล โดยคั่นแต่ละอีเมลด้วยสัญลักษณ์ ,)",-1)),i(n,{modelValue:l.data.bcc,"onUpdate:modelValue":e[40]||(e[40]=o=>l.data.bcc=o),name:"bcc",placeholder:"อีเมลผู้รับจดหมาย"},null,8,["modelValue"])]),t("div",Oe,[t("div",Pe,[e[96]||(e[96]=t("div",null,"ตัวอย่างข้อความ",-1)),u(t("button",{type:"button",class:"button-reload",onClick:e[41]||(e[41]=o=>r.reloadClick())},e[95]||(e[95]=[t("i",{class:"bi bi-arrow-clockwise icon-clockwise"},null,-1),d(" โหลดใหม่ ")]),512),[[p,!1]])]),t("div",He,[t("table",Ke,[t("tbody",null,[t("tr",We,[t("td",Ge,[t("div",Je,[t("div",Qe,[t("div",Xe,[t("div",Ye,[t("div",Ze,[t("div",$e,[t("div",et,[t("a",tt,[t("img",{align:"center",alt:"",border:"0",class:"center fixedwidth",src:l.data.logoImage,width:"110",style:{"text-decoration":"none",height:"auto",border:"0px",width:"100%","max-width":"110px",display:"block"}},null,8,lt)])]),t("div",ot,[t("div",st,[t("p",it,[t("strong",null,[t("span",at,f(l.data.department_name),1)])]),e[97]||(e[97]=t("p",{style:{"font-size":"14px","line-height":"1.0","word-break":"break-word","text-align":"center",margin:"0"}},[t("strong",null,[t("span",{style:{"font-size":"14px","font-weight":"400"}},"ระบบสารบรรณอิเล็กทรอนิกส์")])],-1))]),t("div",nt,[t("div",dt,[t("p",rt,[t("strong",null,[t("span",mt,f(l.data.greeting)+" "+f(l.data.bookout.greeting),1)])])]),t("div",ut,[t("p",pt,f(l.data.message),1)]),e[98]||(e[98]=t("br",null,null,-1)),u(t("div",gt,[t("p",ft,[t("a",{href:l.data.link,title:"ลิงก์ดาวน์โหลดเอกสาร"},f(l.data.link),9,ct)])],512),[[p,l.data.send_type_id!=1]]),t("div",bt,[t("p",_t,f(l.data.detail),1)]),t("div",ht,[t("p",vt,f(l.data.signature),1),t("p",yt,f(l.data.department_name),1)]),t("div",kt,[t("p",wt,f(l.data.contact_name),1),t("p",xt,f(l.data.contact),1)]),t("div",Vt,[t("p",zt,f(l.data.reply_message),1),t("p",{id:"Disclaimer",style:{"font-size":"15px","line-height":"2.0",color:"#15466e","font-style":"italic","word-break":"break-word","text-align":"left",margin:"0","margin-bottom":"10px"},innerHTML:l.data.disclaimer},null,8,Ct)])])])])])])])])])])])])])])])])):v("",!0)])]}),_:1},8,["onSubmit","onInvalidSubmit"])])]),u(t("div",St,[t("div",Ut,[t("div",Mt,[t("div",qt,[t("div",Tt,[e[101]||(e[101]=t("div",{class:"title-size"},"เลือกผู้รับหนังสือ",-1)),t("i",{class:"bi bi-x-lg icon-close",onClick:e[42]||(e[42]=m=>l.modal.showModal=!1)})]),e[105]||(e[105]=t("div",{class:"line"},null,-1)),t("div",At,[t("div",Ft,[e[102]||(e[102]=t("div",{class:"name"},"ผู้รับหนังสือ ",-1)),i(V,{modelValue:l.modal.book_recipient,"onUpdate:modelValue":e[43]||(e[43]=m=>l.modal.book_recipient=m),name:"book_recipient",optionSelect:l.modal.optionSelect.book_recipient,onKeyup:e[44]||(e[44]=m=>r.keyupModal(m)),placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])])]),e[106]||(e[106]=t("div",{class:"line"},null,-1)),t("div",Lt,[t("button",{type:"button",onClick:e[45]||(e[45]=m=>l.modal.showModal=!1),class:"btn button-danger"},e[103]||(e[103]=[t("div",{class:"group-name"},[t("img",{src:x,alt:"times-circle",class:"image-icon"}),t("div",{class:"name"},"ยกเลิก")],-1)])),t("button",{type:"submit",class:"btn button-success",onClick:e[46]||(e[46]=m=>r.modalClick())},e[104]||(e[104]=[t("div",{class:"group-name"},[t("img",{src:h,alt:"times-circle",class:"image-icon"}),t("div",{class:"name"},"ตกลง")],-1)]))])])])])],512),[[p,l.modal.showModal]]),u(t("div",jt,[t("div",It,[t("div",Bt,[t("div",Dt,[t("div",Rt,[e[107]||(e[107]=t("div",{class:"title-size"},"เลือกรูปแบบข้อความ",-1)),t("i",{class:"bi bi-x-lg icon-close",onClick:e[47]||(e[47]=m=>l.modalTemplate.showModal=!1)})]),e[111]||(e[111]=t("div",{class:"line"},null,-1)),t("div",Et,[t("div",Nt,[e[108]||(e[108]=t("div",{class:"name"},"รูปแบบข้อความ ",-1)),i(V,{modelValue:l.modalTemplate.message_format,"onUpdate:modelValue":e[48]||(e[48]=m=>l.modalTemplate.message_format=m),name:"message_format",optionSelect:l.modalTemplate.optionSelect.message_format,onKeyup:e[49]||(e[49]=m=>r.keyupModalTeamplate(m)),placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])])]),e[112]||(e[112]=t("div",{class:"line"},null,-1)),t("div",Ot,[t("button",{type:"button",onClick:e[50]||(e[50]=m=>l.modalTemplate.showModal=!1),class:"btn button-danger"},e[109]||(e[109]=[t("div",{class:"group-name"},[t("img",{src:x,alt:"times-circle",class:"image-icon"}),t("div",{class:"name"},"ยกเลิก")],-1)])),t("button",{type:"submit",class:"btn button-success",onClick:e[51]||(e[51]=m=>r.modalTemplateClick())},e[110]||(e[110]=[t("div",{class:"group-name"},[t("img",{src:h,alt:"times-circle",class:"image-icon"}),t("div",{class:"name"},"ตกลง")],-1)]))])])])])],512),[[p,l.modalTemplate.showModal]]),i(M,{modalAlert:l.modalAlert},null,8,["modalAlert"]),i(q,{show:l.showLoading},null,8,["show"])])}const Wt=T(B,[["render",Pt]]);export{Wt as default};
