import{_ as f,a as v,b}from"./line-up-32057639.js";import{_ as y,r as l,o as w,c as k,a as t,t as r,j as n,b as i,d as A,g as S,k as V}from"./index-4296622d.js";const L={name:"record-type-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",name:"",desc:"",active_flag:!0,optionSelect:{type:[{name:"บันทึกข้อความรับเข้า",value:"0"},{name:"บันทึกข้อความส่งออก",value:"1"}]}}}},methods:{back(){this.$router.push({name:"record-type",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.code="",this.data.name="",this.data.desc=""},onSubmit(){let e=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขชนิดบันทึกข้อความ":"สร้างชนิดบันทึกข้อความ"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(e.edit){let s={code:e.data.code,name:e.data.name,desc:e.data.desc,type:e.data.type,active_flag:parseInt(e.data.active_flag?"1":"0")};e.showLoading=!0,e.axios.put(`/booktype/${e.$route.params.id}`,s).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขชนิดบันทึกข้อความสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}else{let s={code:e.data.code,name:e.data.name,desc:e.data.desc,type:e.data.type,active_flag:parseInt(e.data.active_flag?"1":"0")};e.showLoading=!0,e.axios.post("/booktype",s).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างชนิดบันทึกข้อความสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(d=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/booktype/${this.$route.params.id}`).then(e=>{this.showLoading=!1,this.data={...this.data,...e.data.data},this.data.active_flag=e.data.data.active_flag==1}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}},x={class:"master-record-type-detail"},M={class:"group-overflow"},C={class:"detail"},q={class:"group-head"},I={class:"group-first"},P=t("img",{src:f,alt:"",class:"icon-users"},null,-1),E={class:"name"},B={class:"group-end"},D=t("img",{src:v,class:"icon-back"},null,-1),N=t("img",{src:b,class:"icon-line"},null,-1),U=t("div",{class:"line"},null,-1),F={class:"group-detail"},$={class:"group-between"},j={class:"group-input left"},T=t("div",{class:"name"},[n("ชื่อชนิดบันทึกข้อความ"),t("span",{class:"required"},"*")],-1),z={class:"group-input"},G=t("div",{class:"name"},"เปิด/ปิด การใช้งาน",-1),H={class:"group-between"},J={class:"group-input"},K=t("div",{class:"name"},"รายละเอียด",-1),O=t("div",{class:"line"},null,-1),Q={class:"group-footer"},R={class:"footer-left"},W=t("img",{src:S,alt:"times-circle",class:"icon-times-circle"},null,-1),X={class:"footer-right"},Y={type:"submit",class:"button-success"},Z=t("img",{src:V,alt:"times-circle",class:"icon-check-circle"},null,-1);function ee(e,s,d,te,a,c){const u=l("cpn-input"),_=l("cpn-toggleSwitch"),m=l("cpn-textArea"),p=l("Form"),h=l("cpn-modal-alert"),g=l("cpn-loading");return w(),k("div",x,[t("div",M,[t("div",C,[t("div",q,[t("div",I,[P,t("div",E,r(a.edit?"แก้ไขชนิดบันทึกข้อความ":"สร้างชนิดบันทึกข้อความ"),1)]),t("div",B,[t("button",{type:"button",class:"button-back",onClick:s[0]||(s[0]=o=>c.back())},[D,N,n(" ย้อนกลับ ")])])]),U,i(p,{onSubmit:c.onSubmit,onInvalidSubmit:e.onInvalidSubmit},{default:A(()=>[t("div",F,[t("div",$,[t("div",j,[T,i(u,{modelValue:a.data.name,"onUpdate:modelValue":s[1]||(s[1]=o=>a.data.name=o),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",z,[G,i(_,{modelValue:a.data.active_flag,"onUpdate:modelValue":s[2]||(s[2]=o=>a.data.active_flag=o),name:"active_flag"},null,8,["modelValue"])])]),t("div",H,[t("div",J,[K,i(m,{modelValue:a.data.desc,"onUpdate:modelValue":s[3]||(s[3]=o=>a.data.desc=o),name:"record-type_desc",class:"",style:{},rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),O,t("div",Q,[t("div",R,[t("button",{type:"button",class:"button-danger",onClick:s[4]||(s[4]=o=>c.cancelClick())},[W,n(" ยกเลิก ")])]),t("div",X,[t("button",Y,[Z,n(" "+r(a.edit?"ยืนยันแก้ไขชนิดบันทึกข้อความ":"ยืนยันสร้างชนิดบันทึกข้อความ"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),i(h,{modalAlert:a.modalAlert},null,8,["modalAlert"]),i(g,{show:a.showLoading},null,8,["show"])])}const oe=y(L,[["render",ee]]);export{oe as default};
