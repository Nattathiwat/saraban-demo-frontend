import{_ as b}from"./ballot-duotone-f2459825.js";import{_ as k}from"./plus-circle-duotone-64bd32fe.js";import{_ as v,r as n,o as d,c as i,a as e,b as r,F as f,h as y,i as P,t as c,j as _}from"./index-63fcc095.js";const C={name:"import-book-inex",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,data:{search:"",table:[],page:1,total:0,lastPage:0,perPage:50}}},methods:{addClick(){this.$router.push({name:"import-book-create"}).catch(()=>{})},editClick(a){this.$router.push({name:"import-book-edit",params:{id:a.id}}).catch(()=>{})},pageChange(a){this.data.perPage=a.perPage,this.data.page=a.page,this.apiDepartment()},search(){this.data.status=!0,this.data.perPage=50,this.data.page=1,this.apiDepartment()},apiDepartment(){this.data.table=[],this.showLoading=!0,this.axios.get("/booking-receive",{params:{}}).then(a=>{this.showLoading=!1,a.data.data.filter(s=>{s.speedName=s.speed_name,s.bookingNo=s.receive_document_number,s.referBookno=s.document_number,s.bookingSubject=s.subject,s.typename=s.receive_type_name,s.date=s.as_of_date,s.response=s.response_name,s.statusName=s.status}),this.data.table=a.data.data}).catch(a=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:a.response.data.message}})},deleteClick(a){let s=this;this.modalAlert={showModal:!0,type:"confirm",title:"คุณยืนยันการลบหนังสือรับเข้า",message:`“${a.name}” ใช่หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){s.modalAlert={showModal:!0,type:"success",title:"ทำการลบหนังสือรับเข้าสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){s.apiDepartment()}}}}}},mounted(){this.apiDepartment()}},x={class:"import-book-inex"},N={class:"group-overflow"},A={class:"detail"},V={class:"group-head"},D={class:"group-first"},L=e("img",{src:b,alt:"",class:"icon-users-cog"},null,-1),S=e("div",{class:"name"},"หนังสือรับเข้า",-1),B=e("div",{class:"group-image"},[e("img",{src:k,alt:"",class:"icon-plus"}),_(" สร้างหนังสือรับเข้า ")],-1),j=[B],M={class:"group-end"},F={class:"search"},E=e("div",{class:"line"},null,-1),z={class:"group-body"},T={class:"table-import-book-inex"},U=e("thead",{class:"thead"},[e("tr",{class:"thead-row"},[e("th",{class:"col1"},"ความเร่งด่วน"),e("th",{class:"col2"},"เลขรับ สลค."),e("th",{class:"col3"},"เลขที่หนังสือ"),e("th",{class:"col4"},"ชื่อเรื่อง"),e("th",{class:"col5"},"ชนิด"),e("th",{class:"col6"},"ลงวันที่"),e("th",{class:"col7"},"ผู้รับผิดชอบ"),e("th",{class:"col8"},"สถานะ")])],-1),q={class:"tbody"},w=["onClick"],G={class:"col1"},H={class:"col2"},I={class:"col3"},J={class:"col4"},K={class:"col5"},O={class:"col6"},Q={class:"col7"},R={class:"group-col7"},W={class:"span"},X={class:"col7-detail"},Y=e("div",{class:"image-size"},null,-1),Z={class:"col8"},$={key:0,class:"tbody-row"},ee=e("td",{colspan:"8"},"ไม่มีข้อมูล",-1),se=[ee],te={class:"group-footer"};function ae(a,s,oe,ce,o,l){const h=n("cpn-input"),p=n("cpn-pagination"),g=n("cpn-modal-alert"),m=n("cpn-loading");return d(),i("div",x,[e("div",N,[e("div",A,[e("div",V,[e("div",D,[L,S,e("button",{type:"button",class:"add-import-book",onClick:s[0]||(s[0]=t=>l.addClick())},j)]),e("div",M,[e("div",F,[r(h,{modelValue:o.data.search,"onUpdate:modelValue":s[1]||(s[1]=t=>o.data.search=t),name:"search",type:"search",searchFlag:!0,onSearch:s[2]||(s[2]=t=>l.search()),placeholder:"กรุณากรอกข้อมูลที่ต้องการค้นหา"},null,8,["modelValue"])])])]),E,e("div",z,[e("table",T,[U,e("tbody",q,[(d(!0),i(f,null,y(o.data.table,(t,u)=>(d(),i("tr",{class:"tbody-row pointer",key:u,onClick:le=>l.editClick(t)},[e("td",G,c(t.speedName),1),e("td",H,c(t.bookingNo),1),e("td",I,c(t.referBookno),1),e("td",J,c(t.bookingSubject),1),e("td",K,c(t.typename),1),e("td",O,c(t.date),1),e("td",Q,[e("div",R,[e("span",W,c(t.response),1),e("div",X,[_(c(t.response)+" ",1),Y])])]),e("td",Z,c(t.statusName),1)],8,w))),128)),o.data.table.length==0?(d(),i("tr",$,se)):P("",!0)])])]),e("div",te,[r(p,{page:o.data.page,total:o.data.total,lastPage:o.data.lastPage,perPage:o.data.perPage,onPageChange:l.pageChange},null,8,["page","total","lastPage","perPage","onPageChange"])])])]),r(g,{modalAlert:o.modalAlert},null,8,["modalAlert"]),r(m,{show:o.showLoading},null,8,["show"])])}const re=v(C,[["render",ae]]);export{re as default};
