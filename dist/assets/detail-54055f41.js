import{_ as f}from"./users-duotone-57e3c13d.js";import{_ as b,a as y}from"./line-up-c54e1bbb.js";import{_ as w,r as i,o as k,c as V,a as t,t as u,h as n,b as l,d as S,f as A,k as L}from"./index-6f9b4dc9.js";const x={name:"book-type-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",name:"",desc:"",active_flag:!0,optionSelect:{type:[{name:"หนังสือรับเข้า",value:"0"},{name:"หนังสือส่งออก (ภายนอก)",value:"1"},{name:"หนังสือรับเข้าและส่งออก (ภายนอก)",value:"2"}]}}}},methods:{back(){this.$router.push({name:"book-type",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.code="",this.data.name="",this.data.desc=""},onSubmit(){let s=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขชนิดหนังสือ":"สร้างชนิดหนังสือ"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(s.edit){let e={code:s.data.code,name:s.data.name,desc:s.data.desc,type:s.data.type,active_flag:parseInt(s.data.active_flag?"1":"0")};s.showLoading=!0,s.axios.put(`/booktype/${s.$route.params.id}`,e).then(()=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขชนิดหนังสือสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){s.back()}}}).catch(d=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}else{let e={code:s.data.code,name:s.data.name,desc:s.data.desc,type:s.data.type,active_flag:parseInt(s.data.active_flag?"1":"0")};s.showLoading=!0,s.axios.post("/booktype",e).then(()=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างชนิดหนังสือสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){s.back()}}}).catch(d=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"error",title:"Error",message:d.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/booktype/${this.$route.params.id}`).then(s=>{this.showLoading=!1,this.data={...this.data,...s.data.data},this.data.active_flag=s.data.data.active_flag==1}).catch(s=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:s.response.data.message}})}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}},q={class:"master-book-type-detail"},M={class:"group-overflow"},C={class:"detail"},I={class:"group-head"},P={class:"group-first"},U={class:"name"},E={class:"group-end"},B={class:"group-detail"},D={class:"group-between"},N={class:"group-input left"},F={class:"group-input"},T={class:"group-between"},j={class:"group-input left"},z={class:"group-input"},G={class:"group-between"},H={class:"group-input"},J={class:"group-footer"},K={class:"footer-left"},O={class:"footer-right"},Q={type:"submit",class:"button-success"};function R(s,e,d,W,o,r){const c=i("cpn-input"),p=i("cpn-toggleSwitch"),m=i("cpn-select"),g=i("cpn-textArea"),_=i("Form"),h=i("cpn-modal-alert"),v=i("cpn-loading");return k(),V("div",q,[t("div",M,[t("div",C,[t("div",I,[t("div",P,[e[7]||(e[7]=t("img",{src:f,alt:"",class:"icon-users"},null,-1)),t("div",U,u(o.edit?"แก้ไขชนิดหนังสือ":"สร้างชนิดหนังสือ"),1)]),t("div",E,[t("button",{type:"button",class:"button-back",onClick:e[0]||(e[0]=a=>r.back())},e[8]||(e[8]=[t("img",{src:b,class:"icon-back"},null,-1),t("img",{src:y,class:"icon-line"},null,-1),n(" ย้อนกลับ ")]))])]),e[17]||(e[17]=t("div",{class:"line"},null,-1)),l(_,{onSubmit:r.onSubmit,onInvalidSubmit:s.onInvalidSubmit},{default:S(()=>[t("div",B,[t("div",D,[t("div",N,[e[9]||(e[9]=t("div",{class:"name"},[n("เลขชนิดหนังสือ"),t("span",{class:"required"},"*")],-1)),l(c,{modelValue:o.data.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.data.code=a),name:"department_id",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",F,[e[10]||(e[10]=t("div",{class:"name"},"เปิด/ปิด การใช้งาน",-1)),l(p,{modelValue:o.data.active_flag,"onUpdate:modelValue":e[2]||(e[2]=a=>o.data.active_flag=a),name:"active_flag"},null,8,["modelValue"])])]),t("div",T,[t("div",j,[e[11]||(e[11]=t("div",{class:"name"},[n("ชื่อชนิดหนังสือ"),t("span",{class:"required"},"*")],-1)),l(c,{modelValue:o.data.name,"onUpdate:modelValue":e[3]||(e[3]=a=>o.data.name=a),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),t("div",z,[e[12]||(e[12]=t("div",{class:"name"},[n("ทะเบียน "),t("span",{class:"required"},"*")],-1)),l(m,{modelValue:o.data.type,"onUpdate:modelValue":e[4]||(e[4]=a=>o.data.type=a),name:"type",optionSelect:o.data.optionSelect.type,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])])]),t("div",G,[t("div",H,[e[13]||(e[13]=t("div",{class:"name"},"รายละเอียด",-1)),l(g,{modelValue:o.data.desc,"onUpdate:modelValue":e[5]||(e[5]=a=>o.data.desc=a),name:"book-type_desc",class:"",style:{},rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),e[16]||(e[16]=t("div",{class:"line"},null,-1)),t("div",J,[t("div",K,[t("button",{type:"button",class:"button-danger",onClick:e[6]||(e[6]=a=>r.cancelClick())},e[14]||(e[14]=[t("img",{src:A,alt:"times-circle",class:"icon-times-circle"},null,-1),n(" ยกเลิก ")]))]),t("div",O,[t("button",Q,[e[15]||(e[15]=t("img",{src:L,alt:"times-circle",class:"icon-check-circle"},null,-1)),n(" "+u(o.edit?"ยืนยันแก้ไขชนิดหนังสือ":"ยืนยันสร้างชนิดหนังสือ"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),l(h,{modalAlert:o.modalAlert},null,8,["modalAlert"]),l(v,{show:o.showLoading},null,8,["show"])])}const $=w(x,[["render",R]]);export{$ as default};
