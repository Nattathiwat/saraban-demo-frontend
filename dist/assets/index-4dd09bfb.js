import{_ as V}from"./users-cog-duotone-50670cb2.js";import{_ as k,r as n,o as c,c as r,a as e,b as l,d as C,F as U,h as A,i as D,e as L,j as g,t as d}from"./index-b8d5bd5f.js";const v="/assets/envelope-solid-83ddb2ac.svg",S="/assets/share-from-square-solid-59b40d2c.svg";const M={name:"mail-manage-inex",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,data:{search:"",table:[],page:1,total:0,lastPage:0,perPage:10,department_full_name:"Test"}}},methods:{addClick(){this.$router.push({name:"user-manage-create"}).catch(()=>{})},listClick(a){this.$router.push({name:"automail-sendmail-list",params:{id:a.id},query:{page:this.data.page,perPage:this.data.perPage}}).catch(()=>{})},pageChange(a){this.data.perPage=a.perPage,this.data.page=a.page,this.apiUser()},search(){this.data.status=!0,this.data.perPage=10,this.data.page=1,this.apiUser()},apiUser(){this.data.table=[],this.showLoading=!0,this.axios.get("/user",{params:{keyword:this.data.search,page_size:this.data.perPage,page:this.data.page}}).then(a=>{this.showLoading=!1,a.data.data.filter(s=>{s.permission_id=s.role_id,s.permission_name=s.role_name,this.data.total=s.total}),this.data.table=a.data.data,this.data.lastPage=Math.ceil(this.data.total/this.data.perPage)}).catch(a=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:a.response.data.message}})},deleteClick(a){let s=this;this.modalAlert={showModal:!0,type:"confirm",title:"คุณยืนยันการลบผู้ใช้งาน",message:`“${a.fname}  ${a.lname}”  ใช่หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){s.showLoading=!0,s.axios.delete(`/user/${a.id}`).then(()=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"success",title:"ทำการลบผู้ใช้งานสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){s.apiUser()}}}).catch(u=>{s.showLoading=!1,s.modalAlert={showModal:!0,type:"error",title:"Error",message:u.response.data.message}})}}}},mounted(){var a,s;this.data.page=((a=this.$route.query)==null?void 0:a.page)||this.data.page,this.data.perPage=((s=this.$route.query)==null?void 0:s.perPage)||this.data.perPage,this.apiUser()}},K={class:"mail-inex"},N={class:"group-overflow"},T={class:"detail"},q=L('<div class="group-head"><div class="group-first"><img src="'+V+'" alt="" class="icon-users-cog"><div class="name">รายการหนังสือส่งออก ที่ส่งผ่านอีเมลอัตโนมัติ</div></div></div><div class="line"></div>',2),x={class:"group-detail"},F={class:"group-between"},B={class:"group-input left"},E=e("div",{class:"name"},"ทะเบียน ",-1),I={class:"group-input"},O=e("div",{class:"name"},"เลขออก สลค.",-1),j={class:"group-between"},z={class:"group-input"},G=e("div",{class:"name"},"เรื่อง",-1),H={class:"group-between"},J={class:"group-input left"},Q=e("div",{class:"name"},"จาก",-1),R={class:"group-input"},W=e("div",{class:"name"},"ถึง",-1),X={class:"group-between"},Y={class:"group-input left"},Z=e("div",{class:"name"},"จากวันที่",-1),$={class:"group-input"},ee=e("div",{class:"name"},"ถึงวันที่",-1),se={class:"group-button"},te={class:"button-left"},ae=e("i",{class:"bi bi-arrow-clockwise icon-clockwise"},null,-1),oe=e("div",{class:"button-right"},[e("button",{type:"submit",class:"button-search"},[e("i",{class:"bi bi-search icon-search"}),g(" ค้นหา ")])],-1),le={class:"group-body"},ne={class:"table-department-inex"},de=e("thead",{class:"thead"},[e("tr",{class:"thead-row"},[e("th",{class:"col1"},"ลำดับ"),e("th",{class:"col2"},"ความเร่งด่วน"),e("th",{class:"col3"},"ชั้นความลับ"),e("th",{class:"col4"},"เลขออก สลค."),e("th",{class:"col5"},"ทะเบียนหนังสือ"),e("th",{class:"col6"},"ชื่อเรื่อง"),e("th",{class:"col7"},"ชนิดหนังสือ"),e("th",{class:"col8"},"ลงวันที่"),e("th",{class:"col9"},"จาก"),e("th",{class:"col10"},"ถึง"),e("th",{class:"col11"},[e("img",{src:v,alt:"",class:"icon-send"})])])],-1),ie={class:"tbody"},ce={class:"col1"},re={class:"col2"},pe=e("td",{class:"col3"},[e("div",{class:"new-line"},[e("div",{class:"name"},"ส่งถึง (TO)")])],-1),_e={class:"col4"},ue={class:"col5"},me=e("td",{class:"col6"},[e("div",{class:"new-line"},[e("div",{class:"name"},"ส่งถึง (TO)")])],-1),he={class:"col7"},ge={class:"col8"},ve=e("td",{class:"col9"},[e("div",{class:"new-line"},[e("div",{class:"name"},"ส่งถึง (TO)")])],-1),be={class:"col10"},fe={class:"col11"},ye={class:"group-icon"},we=["onClick"],Pe=["onClick"],Ve={key:0,class:"tbody-row"},ke=e("td",{colspan:"12"},"ไม่มีข้อมูล",-1),Ce=[ke],Ue={class:"group-footer"};function Ae(a,s,u,De,t,p){const _=n("cpn-autoComplete"),m=n("cpn-input"),h=n("cpn-datepicker"),b=n("Form"),f=n("cpn-pagination"),y=n("cpn-modal-alert"),w=n("cpn-loading");return c(),r("div",K,[e("div",N,[e("div",T,[q,l(b,{onSubmit:a.apiMailAddress,onInvalidSubmit:a.onInvalidSubmit},{default:C(()=>[e("div",x,[e("div",F,[e("div",B,[E,l(_,{modelValue:t.data.record,"onUpdate:modelValue":s[0]||(s[0]=o=>t.data.record=o),name:"record",onKeyupData:a.keyupData,placeholder:"กรุณาระบุ"},null,8,["modelValue","onKeyupData"])]),e("div",I,[O,l(m,{modelValue:t.data.doc_num,"onUpdate:modelValue":s[1]||(s[1]=o=>t.data.doc_num=o),name:"doc_num",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),e("div",j,[e("div",z,[G,l(m,{modelValue:t.data.name,"onUpdate:modelValue":s[2]||(s[2]=o=>t.data.name=o),name:"name",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),e("div",H,[e("div",J,[Q,l(_,{modelValue:t.data.send_from,"onUpdate:modelValue":s[3]||(s[3]=o=>t.data.send_from=o),name:"send_from",onKeyupData:a.keyupData,placeholder:"กรุณาระบุ"},null,8,["modelValue","onKeyupData"])]),e("div",R,[W,l(_,{modelValue:t.data.send_to,"onUpdate:modelValue":s[4]||(s[4]=o=>t.data.send_to=o),name:"send_to",onKeyupData:a.keyupData,placeholder:"เลือกหน่วยงานปลายทาง"},null,8,["modelValue","onKeyupData"])])]),e("div",X,[e("div",Y,[Z,l(h,{modelValue:t.data.start_date,"onUpdate:modelValue":s[5]||(s[5]=o=>t.data.start_date=o),name:"start_date",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),e("div",$,[ee,l(h,{modelValue:t.data.end_date,"onUpdate:modelValue":s[6]||(s[6]=o=>t.data.end_date=o),name:"end_date",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),e("div",se,[e("div",te,[e("button",{type:"button",class:"button-warning",onClick:s[7]||(s[7]=o=>a.cancelClick())},[ae,g(" ล้างการค้นหา ")])]),oe])])]),_:1},8,["onSubmit","onInvalidSubmit"]),e("div",le,[e("table",ne,[de,e("tbody",ie,[(c(!0),r(U,null,A(t.data.table,(o,i)=>(c(),r("tr",{class:"tbody-row",key:i},[e("td",ce,d(i+1+t.data.perPage*(t.data.page-1)),1),e("td",re,d(t.data.department_full_name),1),pe,e("td",_e,d(i+1+t.data.perPage*(t.data.page-1)),1),e("td",ue,d(t.data.department_full_name),1),me,e("td",he,d(i+1+t.data.perPage*(t.data.page-1)),1),e("td",ge,d(t.data.department_full_name),1),ve,e("td",be,d(t.data.department_full_name),1),e("td",fe,[e("div",ye,[e("img",{onClick:P=>p.listClick(o),src:S,alt:"",class:"icon-send pointer"},null,8,we),e("img",{onClick:P=>p.deleteClick(o),src:v,alt:"",class:"icon-send pointer"},null,8,Pe)])])]))),128)),t.data.table.length==0?(c(),r("tr",Ve,Ce)):D("",!0)])])]),e("div",Ue,[l(f,{page:t.data.page,total:t.data.total,lastPage:t.data.lastPage,perPage:t.data.perPage,onPageChange:p.pageChange},null,8,["page","total","lastPage","perPage","onPageChange"])])])]),l(y,{modalAlert:t.modalAlert},null,8,["modalAlert"]),l(w,{show:t.showLoading},null,8,["show"])])}const Me=k(M,[["render",Ae]]);export{Me as default};
