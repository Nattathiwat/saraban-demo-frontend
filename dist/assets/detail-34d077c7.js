import{_ as b,a as f,b as v}from"./line-up-32057639.js";import{_ as y,r as n,o as w,c as A,a as s,t as u,j as l,b as i,d as S,g as k,k as V}from"./index-4cacece2.js";const L={name:"group-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",short_name:"",name:"",subministry_id:"",desc:""},optionSelect:{subministry_id:[]}}},methods:{back(){this.$router.push({name:"group",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.desc="",this.data.short_name="",this.data.name=""},onSubmit(){let e=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขกลุ่ม":"สร้างกลุ่ม"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(e.edit){let t={desc:e.data.desc,name:e.data.name,short_name:e.data.short_name,subministry_id:e.data.subministry_id};e.showLoading=!0,e.axios.put(`group/${e.$route.params.id}`,t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขกลุ่มสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(r=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:r.response.data.message}})}else{let t={desc:e.data.desc,name:e.data.name,short_name:e.data.short_name,subministry_id:e.data.subministry_id};e.showLoading=!0,e.axios.post("/group",t).then(()=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างกลุ่มสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){e.back()}}}).catch(r=>{e.showLoading=!1,e.modalAlert={showModal:!0,type:"error",title:"Error",message:r.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/group/${this.$route.params.id}`).then(e=>{this.showLoading=!1,this.data={...this.data,...e.data.data}}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})},api_master(){this.showLoading=!0,this.axios.get("/subministry").then(e=>{this.showLoading=!1,e.data.data.filter(t=>(t.value=t.id,t.name=t.Name,t)),this.optionSelect.subministry_id=e.data.data,this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}).catch(e=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:e.response.data.message}})}},mounted(){this.api_master()}},x={class:"master-group-detail"},C={class:"group-overflow"},q={class:"detail"},M={class:"group-head"},E={class:"group-first"},P=s("img",{src:b,alt:"",class:"icon-users"},null,-1),N={class:"name"},U={class:"group-end"},B=s("img",{src:f,class:"icon-back"},null,-1),D=s("img",{src:v,class:"icon-line"},null,-1),I=s("div",{class:"line"},null,-1),F={class:"group-detail"},j={class:"group-between"},T={class:"group-input left"},z=s("div",{class:"name"},[l("ชื่อย่อกลุ่ม "),s("span",{class:"required"},"*")],-1),G={class:"group-input"},H=s("div",{class:"name"},[l("ชื่อกลุ่ม "),s("span",{class:"required"},"*")],-1),J={class:"group-between"},K={class:"group-input left"},O=s("div",{class:"name"},"รายละเอียด",-1),Q={class:"group-input"},R=s("div",{class:"name"},[l("กอง"),s("span",{class:"required"},"*")],-1),W=s("div",{class:"line"},null,-1),X={class:"group-footer"},Y={class:"footer-left"},Z=s("img",{src:k,alt:"times-circle",class:"icon-times-circle"},null,-1),$={class:"footer-right"},ee={type:"submit",class:"button-success"},se=s("img",{src:V,alt:"times-circle",class:"icon-check-circle"},null,-1);function te(e,t,r,oe,o,d){const c=n("cpn-input"),m=n("cpn-textArea"),_=n("cpn-autoComplete"),h=n("Form"),p=n("cpn-modal-alert"),g=n("cpn-loading");return w(),A("div",x,[s("div",C,[s("div",q,[s("div",M,[s("div",E,[P,s("div",N,u(o.edit?"แก้ไขกลุ่ม":"สร้างกลุ่ม"),1)]),s("div",U,[s("button",{type:"button",class:"button-back",onClick:t[0]||(t[0]=a=>d.back())},[B,D,l(" ย้อนกลับ ")])])]),I,i(h,{onSubmit:d.onSubmit,onInvalidSubmit:e.onInvalidSubmit},{default:S(()=>[s("div",F,[s("div",j,[s("div",T,[z,i(c,{modelValue:o.data.short_name,"onUpdate:modelValue":t[1]||(t[1]=a=>o.data.short_name=a),name:"short_name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),s("div",G,[H,i(c,{modelValue:o.data.name,"onUpdate:modelValue":t[2]||(t[2]=a=>o.data.name=a),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])]),s("div",J,[s("div",K,[O,i(m,{modelValue:o.data.desc,"onUpdate:modelValue":t[3]||(t[3]=a=>o.data.desc=a),name:"group_desc",class:"",style:{},rows:"4",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),s("div",Q,[R,i(_,{modelValue:o.data.subministry_id,"onUpdate:modelValue":t[4]||(t[4]=a=>o.data.subministry_id=a),name:"subministry_id",type:"text",optionSelect:o.optionSelect.subministry_id,onChange:e.change,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect","onChange"])])])]),W,s("div",X,[s("div",Y,[s("button",{type:"button",class:"button-danger",onClick:t[5]||(t[5]=a=>d.cancelClick())},[Z,l(" ยกเลิก ")])]),s("div",$,[s("button",ee,[se,l(" "+u(o.edit?"ยืนยันแก้ไขกลุ่ม":"ยืนยันสร้างกลุ่ม"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),i(p,{modalAlert:o.modalAlert},null,8,["modalAlert"]),i(g,{show:o.showLoading},null,8,["show"])])}const ne=y(L,[["render",te]]);export{ne as default};
