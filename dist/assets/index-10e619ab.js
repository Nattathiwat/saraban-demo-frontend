import{_ as v,r as i,o as f,c as h,w as m,v as c,a as o,t as w,b as l,d as x,e as b,n as p,f as N,g as S}from"./index-63fcc095.js";const y="/assets/logo-62142f9e.png";const F={name:"login-index",data(){return{modalRepass:!1,focusPersonNo:!1,focusPassword:!1,data:{personNo:"",password:"",message:"ชื่อผู้ใช้ หรือ รหัสผ่าน ไม่ถูกต้อง !",fname:"",lname:""},modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,loginFalse:!1}},methods:{closeModalRepass(){this.modalRepass=!1},repasswordClick(){this.modalRepass=!0},onSubmit(d){let s={};s={username:this.data.personNo,password:this.data.password},this.showLoading=!0,this.axios.post("/auth/login",s,{headers:{"Content-Type":"application/json"}}).then(a=>{this.showLoading=!1,localStorage.setItem("department_name",a.data.department),localStorage.setItem("department_id",a.data.department_id),localStorage.setItem("fname",a.data.fname),localStorage.setItem("lname",a.data.lname),localStorage.setItem("login","true"),this.$router.push({name:"user"}).catch(()=>{})}).catch(a=>{this.showLoading=!1,this.data.message=a.response.data.message,this.loginFalse=!0,this.data.personNo="",this.data.password=""})}},created(){localStorage.setItem("login","false")},watch:{modalRepass(){document.body.style.overflow=this.modalRepass?"hidden":""}}},I={class:"login-index"},R={class:"card-center"},V=o("div",{class:"group-image"},[o("img",{class:"image-logo",src:y,alt:"logo"}),o("div",{class:"title"},"สำนักเลขาธิการคณะรัฐมนตรี"),o("div",{class:"sub-title"},"ระบบสารบรรณ Demo")],-1),C={class:"group-input"},P={class:"group-input"},k=o("div",{class:"group-button"},[o("button",{type:"submit",class:"button-login"},"เข้าสู่ระบบ")],-1),L={class:"modal-class-repass"},A={class:"modal-center"},D={class:"modal-size"},M=b('<div class="modal-detail"><div class="image-icon"><img src="'+N+'" alt="" class="image-confirm"></div><div class="title-size">กรุณาติดต่อผู้ดูแลระบบเพื่อทำการเปลี่ยนรหัสผ่าน</div><div class="message">Email : xxxxx123@gmail.com</div><div class="message">โทร : 0xx-xxx-xxxx</div></div>',1),z={class:"group-footer center"},B=o("div",{class:"group-name"},[o("img",{src:S,alt:"",class:"image-times"}),o("div",{class:"name"},"ปิด")],-1),E=[B];function q(d,s,a,U,e,n){const r=i("cpn-input"),u=i("Form"),g=i("cpn-modal-alert"),_=i("cpn-loading");return f(),h("div",I,[m(o("div",{class:"login-false"},w(e.data.message)+" !",513),[[c,e.loginFalse]]),o("div",R,[V,l(u,{onSubmit:s[7]||(s[7]=t=>n.onSubmit(!1)),onInvalidSubmit:d.onInvalidSubmit},{default:x(()=>[o("div",C,[o("div",{class:p(["input-name",!e.data.personNo&&!e.focusPersonNo?"show-text":""])},"ชื่อผู้ใช้งาน หรือ Email",2),l(r,{modelValue:e.data.personNo,"onUpdate:modelValue":s[0]||(s[0]=t=>e.data.personNo=t),name:"personNo",type:"text",classN:"input-login",rules:"required",onFocusin:s[1]||(s[1]=t=>e.focusPersonNo=!0),onFocusout:s[2]||(s[2]=t=>e.focusPersonNo=!1)},null,8,["modelValue"])]),o("div",P,[o("div",{class:p(["input-name",!e.data.password&&!e.focusPassword?"show-text":""])},"รหัสผ่าน",2),l(r,{modelValue:e.data.password,"onUpdate:modelValue":s[3]||(s[3]=t=>e.data.password=t),name:"password",type:"password",classN:"input-login",rules:"required",iconN:"eye",onFocusin:s[4]||(s[4]=t=>e.focusPassword=!0),onFocusout:s[5]||(s[5]=t=>e.focusPassword=!1)},null,8,["modelValue"])]),o("div",{class:"re-password pointer",onClick:s[6]||(s[6]=t=>n.repasswordClick())},"ลืมรหัสผ่าน?"),k]),_:1},8,["onInvalidSubmit"])]),m(o("div",L,[o("div",A,[o("div",D,[M,o("div",z,[o("button",{type:"button",onClick:s[8]||(s[8]=(...t)=>n.closeModalRepass&&n.closeModalRepass(...t)),class:"button-confirm button-success"},E)])])])],512),[[c,e.modalRepass]]),l(g,{modalAlert:e.modalAlert},null,8,["modalAlert"]),l(_,{show:e.showLoading},null,8,["show"])])}const T=v(F,[["render",q]]);export{T as default};
