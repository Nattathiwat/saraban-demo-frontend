import{_}from"./users-duotone-57e3c13d.js";import{_ as h,a as f}from"./line-up-c54e1bbb.js";import{_ as b,r as i,o as v,c as w,a as s,t as c,h as l,b as r,d as k,f as y,k as A}from"./index-6f9b4dc9.js";const L={name:"org-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},showLoading:!1,edit:!1,data:{code:"",department_short_name:"",department_full_name:"",filename:"",filepath:""}}},methods:{back(){this.$router.push({name:"organization",query:{page:this.$route.query.page,perPage:this.$route.query.perPage}}).catch(()=>{})},cancelClick(){this.back(),this.data.name=""},onSubmit(){let t=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.edit?"แก้ไขกระทรวง":"สร้างกระทรวง"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){if(t.edit){let e={name:t.data.name};t.showLoading=!0,t.axios.put(`/organization/${t.$route.params.id}`,e).then(()=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"success",title:"ทำการแก้ไขกระทรวงสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){t.back()}}}).catch(a=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"error",title:"Error",message:a.response.data.message}})}else{let e={name:t.data.name};t.showLoading=!0,t.axios.post("/organization",e).then(()=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"success",title:"ทำการสร้างกระทรวงสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){t.back()}}}).catch(a=>{t.showLoading=!1,t.modalAlert={showModal:!0,type:"error",title:"Error",message:a.response.data.message}})}}}},apiDetail(){this.showLoading=!0,this.axios.get(`/organization/${this.$route.params.id}`).then(t=>{this.showLoading=!1,this.data=t.data.data}).catch(t=>{this.showLoading=!1,this.modalAlert={showModal:!0,type:"error",title:"Error",message:t.response.data.message}})}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1}},S={class:"master-org-detail"},x={class:"group-overflow"},M={class:"detail"},$={class:"group-head"},C={class:"group-first"},V={class:"name"},q={class:"group-end"},P={class:"group-detail"},z={class:"group-between"},E={class:"group-input left"},B={class:"group-footer"},D={class:"footer-left"},I={class:"footer-right"},N={type:"submit",class:"button-success"};function F(t,e,a,T,o,n){const m=i("cpn-input"),u=i("Form"),p=i("cpn-modal-alert"),g=i("cpn-loading");return v(),w("div",S,[s("div",x,[s("div",M,[s("div",$,[s("div",C,[e[3]||(e[3]=s("img",{src:_,alt:"",class:"icon-users"},null,-1)),s("div",V,c(o.edit?"แก้ไขกระทรวง":"สร้างกระทรวง "),1)]),s("div",q,[s("button",{type:"button",class:"button-back",onClick:e[0]||(e[0]=d=>n.back())},e[4]||(e[4]=[s("img",{src:h,class:"icon-back"},null,-1),s("img",{src:f,class:"icon-line"},null,-1),l(" ย้อนกลับ ")]))])]),e[9]||(e[9]=s("div",{class:"line"},null,-1)),r(u,{onSubmit:n.onSubmit,onInvalidSubmit:t.onInvalidSubmit},{default:k(()=>[s("div",P,[s("div",z,[s("div",E,[e[5]||(e[5]=s("div",{class:"name"},[l("ชื่อกระทรวง "),s("span",{class:"required"},"*")],-1)),r(m,{modelValue:o.data.name,"onUpdate:modelValue":e[1]||(e[1]=d=>o.data.name=d),name:"name",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),e[8]||(e[8]=s("div",{class:"line"},null,-1)),s("div",B,[s("div",D,[s("button",{type:"button",class:"button-danger",onClick:e[2]||(e[2]=d=>n.cancelClick())},e[6]||(e[6]=[s("img",{src:y,alt:"times-circle",class:"icon-times-circle"},null,-1),l(" ยกเลิก ")]))]),s("div",I,[s("button",N,[e[7]||(e[7]=s("img",{src:A,alt:"times-circle",class:"icon-check-circle"},null,-1)),l(" "+c(o.edit?"ยืนยันแก้ไขกระทรวง":"ยืนยันสร้างกระทรวง"),1)])])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),r(p,{modalAlert:o.modalAlert},null,8,["modalAlert"]),r(g,{show:o.showLoading},null,8,["show"])])}const H=b(L,[["render",F]]);export{H as default};
