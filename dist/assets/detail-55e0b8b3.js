import{_ as j}from"./ballot-duotone-f2459825.js";import{_ as q}from"./plus-circle-duotone-64bd32fe.js";import{_ as S}from"./trash-alt-duotone-12d94c28.js";import{_ as L,r as u,o as r,c as _,a as e,t as y,b as n,d as M,F as f,h as k,n as w,j as i,g as F,k as C}from"./index-66c995f5.js";const N={name:"import-book-detail",data(){return{modalAlert:{showModal:!1,title:"",message:""},optionSelectDefault:{nameSignature:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],department:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],sendRegistration:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],issuingNumbers:[{name:"เลขเดี่ยว",value:"เลขเดี่ยว"},{name:"หลายเลข",value:"หลายเลข"}],deliveryFormat:[{name:"ตอบรับ",value:"ตอบรับ"},{name:"แจ้งเพื่อทราบ",value:"แจ้งเพื่อทราบ"},{name:"ไม่ระบุ",value:"ไม่ระบุ"}]},showLoading:!1,edit:!1,flagSave:1,data:{receive_regis_id:"",book_type_id:"",receive_date:"",receive_time:"",document_number:"",as_of_date:"",subject:"",secret_id:"",send_to:"",book_desc:"",contracts:[{department_id:"",receive_type:"",contract_name:"",contract_phone:"",contract_fax:""}],main_docs:[{filename:"",file:[]}],attachments:[{filename:"",file:[]}],booking_refers:[{book_refer_id:"",original_refer_id:"",book_type:"",date:""}],sendTo:[],comments:"",model:"",see:""},optionSelect:{receive_regis_id:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],book_type_id:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],secret_id:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],speed_id:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],department_id:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],receive_type:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],model:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],see:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}],sendTo:[{name:"select1",value:"1"},{name:"select2",value:"2"},{name:"select3",value:"3"}]}}},methods:{sendToClick(){this.axios.get("/v1/login")},searchClick(d){d.original_refer_id="aaaa",d.date="10/11/2565"},downloadFile(d){this.axios({method:"get",url:d.link,baseURL:"",responseType:"blob"}).then(s=>{const h=new Blob([s.data],{type:"application/pdf"});window.open(URL.createObjectURL(h))})},uploadFile(d){document.querySelector(`[name="${d}"]`).click()},fileSetChange(d,s,h){for(var g=0;g<document.querySelector(`[name="${d}"]`).files.length;g++){let o=document.querySelector(`[name="${d}"]`).files[g];if(o.type=="application/pdf"){let c={name:o.name,type:o.type=="application/pdf"?"pdf":"",link:URL.createObjectURL(o),size:(o.size/1024/1024).toFixed(2)+" MB",file:o};h=="fileOriginllBook"?(this.data.set[s].originllBookFile=c,this.data.set[s].department.filter(v=>{v.originllBookFile=c})):(this.data.set[s].duplicateCopyFile=c,this.data.set[s].department.filter(v=>{v.duplicateCopyFile=c})),document.querySelector(`[name="${d}"]`).value=null}}},back(){this.$router.push({name:"import-book"}).catch(()=>{})},onSubmit(){console.log("xx",this.flagSave);let d=this;this.modalAlert={showModal:!0,type:"confirm",title:`คุณยืนยันการ${this.flagSave==1?"บันทึกแบบร่าง":"บันทึกและส่งต่อ"}หรือไม่`,confirm:!0,msgSuccess:!0,afterPressAgree(){d.flagSave==1?d.modalAlert={showModal:!0,type:"success",title:"ทำการบันทึกแบบร่างสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){d.back()}}:d.modalAlert={showModal:!0,type:"success",title:"ทำการบันทึกและส่งต่อสำเร็จแล้ว",msgSuccess:!0,afterPressAgree(){d.back()}}}}},apiDetail(){this.data.code="aaaaa",this.data.short_name="bbbbb",this.data.name="aaa@aa.aa",this.data.department="สำนักงานเลขาธิการ"}},mounted(){this.$route.params.id?(this.edit=!0,this.apiDetail()):this.edit=!1},watch:{"modalRegiter.showModal"(){document.body.style.overflow=this.modalRegiter.showModal?"hidden":""}}},z={class:"import-book-detail"},D={class:"group-overflow"},I={class:"detail"},O={class:"group-head"},P={class:"group-first"},x=e("img",{src:j,alt:"",class:"icon-size"},null,-1),E={class:"name"},G=e("div",{class:"line"},null,-1),H={class:"group-detail"},J={class:"group-input"},K={class:"group-between"},Q={class:"group-input left"},W=e("div",{class:"name"},[i("ทะเบียนรับ "),e("span",{class:"required"},"*")],-1),X={class:"group-between"},Y={class:"group-input left"},Z=e("div",{class:"name"},[i("วันที่รับหนังสือ "),e("span",{class:"required"},"*")],-1),$={class:"group-input"},ee=e("div",{class:"name"},[i("เวลาที่รับหนังสือ "),e("span",{class:"required"},"*")],-1),te={class:"group-between"},oe={class:"group-input left"},se=e("div",{class:"name"},[i("ชนิดของหนังสือ "),e("span",{class:"required"},"*")],-1),le={class:"group-between"},ne={class:"group-input left"},ae=e("div",{class:"name"},[i("เลขที่หนังสือ "),e("span",{class:"required"},"*")],-1),ie={class:"group-input"},de=e("div",{class:"name"},[i("ลงวันที่ "),e("span",{class:"required"},"*")],-1),ce={class:"group-input d-flex align-items-center"},ue=e("div",{class:"name"},"อ้างอิงถึง",-1),re=e("div",{class:"group-image"},[e("img",{src:q,alt:"",class:"icon-plus"}),i(" เพิ่มเอกสารอ้างอิง ")],-1),_e=[re],me={class:"group-input left"},pe={class:"group-input left"},ve={class:"group-input d-flex"},he=["onClick"],ge=e("img",{src:S,alt:"",class:"image-trash pointer"},null,-1),be=[ge],fe=e("div",{class:"group-input"},null,-1),ke={class:"group-between"},Ve={class:"group-input left"},ye=e("div",{class:"name"},[i("ชื่อเรื่อง "),e("span",{class:"required"},"*")],-1),Se={class:"group-between"},Ce={class:"group-input left"},Ue=e("div",{class:"name"},[i("ชั้นความลับ "),e("span",{class:"required"},"*")],-1),we={class:"group-input"},qe=e("div",{class:"name"},[i("ความเร่งด่วน "),e("span",{class:"required"},"*")],-1),Fe={class:"group-input left"},Ae=e("div",{class:"name"},[i("เรียน "),e("span",{class:"required"},"*")],-1),Te={class:"group-input left"},Be=e("div",{class:"name"},"รายละเอียดหนังสือ",-1),Re={class:"group-input"},je=e("div",{class:"name"},'Tag สำหรับค้นหา (กรอกข้อมูลจบ 1 ประโยค ให้กด "Enter")',-1),Le=e("div",{class:"line"},null,-1),Me={class:"group-between"},Ne={class:"group-input left"},ze=e("div",{class:"name"},[i("หน่วยงานที่เสนอเรื่อง "),e("span",{class:"required"},"*")],-1),De={class:"group-input"},Ie=e("div",{class:"name"},[i("ช่องทางการรับเอกสาร "),e("span",{class:"required"},"*")],-1),Oe={class:"group-between"},Pe={class:"group-input left"},xe=e("div",{class:"name"},"ผู้ติดต่อ",-1),Ee={class:"group-between"},Ge={class:"group-input left"},He=e("div",{class:"name"},"โทรศัพท์",-1),Je={class:"group-input"},Ke=e("div",{class:"name"},"โทรสาร",-1),Qe=e("div",{class:"line"},null,-1),We={class:"group-detail"},Xe={class:"group-between"},Ye={class:"group-input left"},Ze=e("div",{class:"name"},"หนังสือต้นเรื่อง",-1),$e={class:"group-input-file"},et=["onClick"],tt=["onClick"],ot=["onChange","name"],st=["onClick"],lt=e("i",{class:"bi bi-eye icon-eye"},null,-1),nt=[lt],at=["onClick"],it=e("img",{src:S,alt:"",class:"image-trash pointer"},null,-1),dt=[it],ct={class:"group-input"},ut={class:"group-input d-flex align-items-center"},rt=e("div",{class:"name"},"สิ่งที่ส่งมาด้วย",-1),_t=e("div",{class:"group-image"},[e("img",{src:q,alt:"",class:"icon-plus"}),i(" เพิ่มไฟล์ ")],-1),mt=[_t],pt={class:"group-input-file"},vt=["onClick"],ht=["onClick"],gt=["onChange","name"],bt=["onClick"],ft=e("i",{class:"bi bi-eye icon-eye"},null,-1),kt=[ft],Vt=["onClick"],yt=e("img",{src:S,alt:"",class:"image-trash pointer"},null,-1),St=[yt],Ct=e("div",{class:"line"},null,-1),Ut={class:"send-to"},wt={class:"group-input"},qt=e("div",{class:"name"},[i("ส่งต่อ(กรอกข้อมูล และคลิกเลือกรายชื่อ) "),e("span",{class:"required"},"*กรุณาใส่รายชื่อที่ต้องการส่งต่อ")],-1),Ft={class:"group-input"},At=e("div",{class:"name"},"ความเห็น / คำสั่ง",-1),Tt={class:"group-between"},Bt={class:"group-input left"},Rt=e("div",{class:"name"},"รูปแบบการดำเนินการ",-1),jt={class:"group-input"},Lt=e("div",{class:"name"},"การมองเห็น",-1),Mt={class:"d-flex align-items-center justify-content-between"},Nt=e("img",{src:F,alt:"times-circle",class:"icon-times-circle"},null,-1),zt=e("img",{src:C,alt:"times-circle",class:"icon-check-circle"},null,-1),Dt=e("div",{class:"line mt-4"},null,-1),It={class:"group-footer"},Ot={class:"footer-left"},Pt=e("img",{src:F,alt:"times-circle",class:"icon-times-circle"},null,-1),xt={class:"footer-right"},Et=e("img",{src:C,alt:"times-circle",class:"icon-check-circle"},null,-1),Gt=["disabled"],Ht=e("img",{src:C,alt:"times-circle",class:"icon-check-circle"},null,-1);function Jt(d,s,h,g,o,c){const v=u("cpn-checkbox"),m=u("cpn-select"),V=u("cpn-datepicker"),A=u("cpn-time"),p=u("cpn-input"),b=u("cpn-textArea"),U=u("cpn-input-tags"),T=u("Form"),B=u("cpn-modal-alert"),R=u("cpn-loading");return r(),_("div",z,[e("div",D,[e("div",I,[e("div",O,[e("div",P,[x,e("div",E,y(o.edit?"แก้ไขหนังสือรับเข้า":"สร้างหนังสือรับเข้า"),1)])]),G,n(T,{onSubmit:c.onSubmit,onInvalidSubmit:d.onInvalidSubmit},{default:M(()=>[e("div",H,[e("div",J,[n(v,{modelValue:o.data.originalBook,"onUpdate:modelValue":s[0]||(s[0]=t=>o.data.originalBook=t),name:"originalBook",label:"หนังสือต้นเรื่อง"},null,8,["modelValue"])]),e("div",K,[e("div",Q,[W,n(m,{modelValue:o.data.receive_regis_id,"onUpdate:modelValue":s[1]||(s[1]=t=>o.data.receive_regis_id=t),name:"receive_regis_id",rules:"required",optionSelect:o.optionSelect.receive_regis_id,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])]),e("div",X,[e("div",Y,[Z,n(V,{modelValue:o.data.receive_date,"onUpdate:modelValue":s[2]||(s[2]=t=>o.data.receive_date=t),name:"receive_date",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),e("div",$,[ee,n(A,{modelValue:o.data.receive_time,"onUpdate:modelValue":s[3]||(s[3]=t=>o.data.receive_time=t),name:"receive_time",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),e("div",te,[e("div",oe,[se,n(m,{modelValue:o.data.book_type_id,"onUpdate:modelValue":s[4]||(s[4]=t=>o.data.book_type_id=t),name:"book_type_id",rules:"required",optionSelect:o.optionSelect.book_type_id,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])]),e("div",le,[e("div",ne,[ae,n(p,{modelValue:o.data.document_number,"onUpdate:modelValue":s[5]||(s[5]=t=>o.data.document_number=t),name:"document_number",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])]),e("div",ie,[de,n(V,{modelValue:o.data.as_of_date,"onUpdate:modelValue":s[6]||(s[6]=t=>o.data.as_of_date=t),name:"as_of_date",rules:"required",placeholder:"กรุณาระบุ"},null,8,["modelValue"])])])]),e("div",ce,[ue,e("button",{type:"button",class:"add-import-book",onClick:s[7]||(s[7]=t=>o.data.booking_refers.push({book_refer_id:"",original_refer_id:"",book_type:"",date:""}))},_e)]),(r(!0),_(f,null,k(o.data.booking_refers,(t,l)=>(r(),_("div",{class:"group-between",key:l},[e("div",me,[n(p,{modelValue:t.book_refer_id,"onUpdate:modelValue":a=>t.book_refer_id=a,name:`codeRefers${l}`,type:"search",searchFlag:!0,onSearchClick:a=>c.searchClick(t),placeholder:"เลขที่หนังสืออ้างอิง"},null,8,["modelValue","onUpdate:modelValue","name","onSearchClick"])]),e("div",pe,[n(p,{modelValue:t.original_refer_id,"onUpdate:modelValue":a=>t.original_refer_id=a,name:`nameRefers${l}`,disabled:!0,placeholder:"ชื่อเรื่อง"},null,8,["modelValue","onUpdate:modelValue","name"])]),e("div",ve,[n(V,{modelValue:t.date,"onUpdate:modelValue":a=>t.date=a,name:`dateRefers${l}`,disabled:!0,placeholder:"วันที่รับหนังสือ"},null,8,["modelValue","onUpdate:modelValue","name"]),e("button",{type:"button",onClick:a=>(o.data.booking_refers.length>1?o.data.booking_refers.splice(l,1):t.book_refer_id="",t.original_refer_id="",t.date=""),class:"button-delete ms-3"},be,8,he)])]))),128)),fe,e("div",ke,[e("div",Ve,[ye,n(b,{modelValue:o.data.subject,"onUpdate:modelValue":s[8]||(s[8]=t=>o.data.subject=t),name:"subject",rules:"required",rows:"3"},null,8,["modelValue"])]),e("div",Se,[e("div",Ce,[Ue,n(m,{modelValue:o.data.secret_id,"onUpdate:modelValue":s[9]||(s[9]=t=>o.data.secret_id=t),name:"secret_id",rules:"required",optionSelect:o.optionSelect.secret_id,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])]),e("div",we,[qe,n(m,{modelValue:o.data.speed_id,"onUpdate:modelValue":s[10]||(s[10]=t=>o.data.speed_id=t),name:"speed_id",rules:"required",optionSelect:o.optionSelect.speed_id,placeholder:"กรุณาระบุ"},null,8,["modelValue","optionSelect"])])])]),e("div",Fe,[Ae,n(b,{modelValue:o.data.send_to,"onUpdate:modelValue":s[11]||(s[11]=t=>o.data.send_to=t),name:"send_to",rules:"required",rows:"1"},null,8,["modelValue"])]),e("div",Te,[Be,n(b,{modelValue:o.data.book_desc,"onUpdate:modelValue":s[12]||(s[12]=t=>o.data.book_desc=t),name:"book_desc",rows:"1"},null,8,["modelValue"])]),e("div",Re,[je,n(U,{modelValue:o.data.tag,"onUpdate:modelValue":s[13]||(s[13]=t=>o.data.tag=t),name:"tag"},null,8,["modelValue"])])]),Le,(r(!0),_(f,null,k(o.data.contracts,(t,l)=>(r(),_("div",{class:"group-detail",key:l},[e("div",Me,[e("div",Ne,[ze,n(m,{modelValue:t.department_id,"onUpdate:modelValue":a=>t.department_id=a,name:`${l}department_id`,rules:"required",optionSelect:o.optionSelect.department_id},null,8,["modelValue","onUpdate:modelValue","name","optionSelect"])]),e("div",De,[Ie,n(m,{modelValue:t.receive_type,"onUpdate:modelValue":a=>t.receive_type=a,name:`${l}receive_type`,rules:"required",optionSelect:o.optionSelect.receive_type},null,8,["modelValue","onUpdate:modelValue","name","optionSelect"])])]),e("div",Oe,[e("div",Pe,[xe,n(p,{modelValue:t.contract_name,"onUpdate:modelValue":a=>t.contract_name=a,name:`${l}contract_name`},null,8,["modelValue","onUpdate:modelValue","name"])]),e("div",Ee,[e("div",Ge,[He,n(p,{modelValue:t.contract_phone,"onUpdate:modelValue":a=>t.contract_phone=a,isNumber:!0,name:`${l}contract_phone`},null,8,["modelValue","onUpdate:modelValue","name"])]),e("div",Je,[Ke,n(p,{modelValue:t.contract_fax,"onUpdate:modelValue":a=>t.contract_fax=a,isNumber:!0,name:`${l}contract_fax`},null,8,["modelValue","onUpdate:modelValue","name"])])])])]))),128)),Qe,e("div",We,[e("div",Xe,[e("div",Ye,[Ze,(r(!0),_(f,null,k(o.data.main_docs,(t,l)=>(r(),_("div",{class:"d-flex mb-3",key:l},[e("div",$e,[e("button",{type:"button",class:"button-file",onClick:a=>c.uploadFile(`main_docs${l}`)},[e("span",{class:w(t.filename?"":"no-data")},y(t.filename?t.filename:"หนังสือต้นเรื่อง"),3)],8,et),e("div",{class:"text pointer",onClick:a=>c.uploadFile(`main_docs${l}`)},"แนบเอกสาร",8,tt),e("input",{type:"file",onChange:a=>c.fileSetChange(`main_docs${l}`,l,"main_docs"),name:`main_docs${l}`,style:{display:"none"},accept:"application/pdf"},null,40,ot)]),e("button",{type:"button",onClick:a=>c.downloadFile(t),class:"button-eye"},nt,8,st),e("button",{type:"button",class:"del-department-3",onClick:a=>o.data.main_docs.length>1?o.data.main_docs.splice(l,1):t.filename=""},dt,8,at)]))),128))]),e("div",ct,[e("div",ut,[rt,e("button",{type:"button",class:"add-import-book",onClick:s[14]||(s[14]=t=>o.data.attachments.push({filename:"",file:[]}))},mt)]),(r(!0),_(f,null,k(o.data.attachments,(t,l)=>(r(),_("div",{class:"d-flex mb-3",key:l},[e("div",pt,[e("button",{type:"button",class:"button-file",onClick:a=>c.uploadFile(`attachments${l}`)},[e("span",{class:w(t.filename?"":"no-data")},y(t.filename?t.filename:"สิ่งที่ส่งมาด้วย"),3)],8,vt),e("div",{class:"text pointer",onClick:a=>c.uploadFile(`attachments${l}`)},"แนบเอกสาร",8,ht),e("input",{type:"file",onChange:a=>c.fileSetChange(`attachments${l}`,l,"attachments"),name:`attachments${l}`,style:{display:"none"}},null,40,gt)]),e("button",{type:"button",onClick:a=>c.downloadFile(t),class:"button-eye"},kt,8,bt),e("button",{type:"button",class:"del-department-3",onClick:a=>o.data.attachments.length>1?o.data.attachments.splice(l,1):t.filename=""},St,8,Vt)]))),128))])])]),Ct,e("div",Ut,[e("div",wt,[qt,n(U,{modelValue:o.data.sendTo,"onUpdate:modelValue":s[15]||(s[15]=t=>o.data.sendTo=t),flagSearch:!0,optionSelect:o.optionSelect.sendTo,name:"sendTo"},null,8,["modelValue","optionSelect"])]),e("div",Ft,[At,n(b,{modelValue:o.data.comments,"onUpdate:modelValue":s[16]||(s[16]=t=>o.data.comments=t),name:"comments",rows:"3"},null,8,["modelValue"])]),e("div",Tt,[e("div",Bt,[Rt,n(m,{modelValue:o.data.model,"onUpdate:modelValue":s[17]||(s[17]=t=>o.data.model=t),name:"model",optionSelect:o.optionSelect.model},null,8,["modelValue","optionSelect"])]),e("div",jt,[Lt,n(m,{modelValue:o.data.see,"onUpdate:modelValue":s[18]||(s[18]=t=>o.data.see=t),name:"see",optionSelect:o.optionSelect.see},null,8,["modelValue","optionSelect"])])]),e("div",Mt,[e("div",null,[e("button",{type:"button",class:"button button-danger",onClick:s[19]||(s[19]=t=>c.back())},[Nt,i(" ยกเลิก ")])]),e("div",null,[e("button",{type:"button",onClick:s[20]||(s[20]=t=>c.sendToClick()),class:"button button-success"},[zt,i(" เพิ่มการส่งต่อ ")])])])]),Dt,e("div",It,[e("div",Ot,[e("button",{type:"button",class:"button-danger",onClick:s[21]||(s[21]=t=>c.back())},[Pt,i(" ปิด ")])]),e("div",xt,[e("button",{type:"submit",class:"button-primary",onClick:s[22]||(s[22]=t=>o.flagSave=1)},[Et,i(" บันทึกแบบร่าง ")]),e("button",{type:"submit",class:"button-success",onClick:s[23]||(s[23]=t=>o.flagSave=2),disabled:o.data.sendTo.length<1},[Ht,i(" บันทึกและส่งต่อ ")],8,Gt)])])]),_:1},8,["onSubmit","onInvalidSubmit"])])]),n(B,{modalAlert:o.modalAlert},null,8,["modalAlert"]),n(R,{show:o.showLoading},null,8,["show"])])}const Yt=L(N,[["render",Jt]]);export{Yt as default};
